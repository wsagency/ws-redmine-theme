/* ==========================================================================
   WS Redmine Theme — Part 1: Foundation, Navigation & Structural Chrome
   Linear.app-inspired design — Light Mode — SAFE (visual-only on structure)
   ========================================================================== */

/* ========== FONT IMPORT ========== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* ========== CSS CUSTOM PROPERTIES (Light Mode) ========== */
:root {
  /* Background colors */
  --bg-primary: #FFFFFF;
  --bg-secondary: #F9F9FB;
  --bg-tertiary: #F3F3F6;
  --bg-accent: #5E6AD2;
  --bg-accent-hover: #4E5BBD;
  --bg-accent-subtle: #EEF0FF;

  /* Text colors */
  --text-primary: #1B1B1F;
  --text-secondary: #6B6F76;
  --text-tertiary: #9CA0A8;
  --text-on-accent: #FFFFFF;

  /* Borders */
  --border-primary: #E8E8EC;
  --border-secondary: #F0F0F3;
  --border-focus: #5E6AD2;

  /* Status colors */
  --status-green: #4CAF50;
  --status-yellow: #F59E0B;
  --status-red: #EF4444;
  --status-blue: #3B82F6;
  --status-orange: #F97316;

  /* Priority colors */
  --priority-urgent: #EF4444;
  --priority-high: #F97316;
  --priority-normal: #6B6F76;
  --priority-low: #9CA0A8;

  /* Typography */
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;

  /* Font sizes */
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 13px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 20px;
  --font-size-2xl: 24px;

  /* Font weights */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;

  /* Line heights */
  --line-height-tight: 1.3;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.7;

  /* Letter spacing */
  --letter-spacing: -0.01em;

  /* Border radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04);
}


/* ========== BODY & GLOBAL TEXT STYLES ========== */

body {
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing);
  color: var(--text-primary);
  background-color: var(--bg-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}


/* ========== LINK STYLES ========== */

a {
  color: var(--bg-accent);
  text-decoration: none;
  transition: color 0.15s ease;
}

a:hover {
  color: var(--bg-accent-hover);
  text-decoration: underline;
}

a:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}


/* ========== SELECTION STYLES ========== */

::selection {
  background-color: var(--bg-accent);
  color: var(--text-on-accent);
}

::-moz-selection {
  background-color: var(--bg-accent);
  color: var(--text-on-accent);
}


/* ========== HEADING STYLES (visual only — NO margin/padding) ========== */

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family);
  font-weight: var(--font-weight-semibold);
  letter-spacing: var(--letter-spacing);
  line-height: var(--line-height-tight);
  color: var(--text-primary);
}

h1 {
  font-size: var(--font-size-2xl);
}

h2 {
  font-size: var(--font-size-xl);
}

h3 {
  font-size: var(--font-size-lg);
}

h4 {
  font-size: var(--font-size-md);
}

h5 {
  font-size: var(--font-size-base);
}

h6 {
  font-size: var(--font-size-sm);
}


/* ========== #header — VISUAL ONLY ========== */
/* SAFE: background-color, border-bottom color, background-image, box-shadow only.
   NO: display, position, flex, padding, min-height, align-items, flex-wrap */

#header {
  background-color: var(--bg-primary);
  border-bottom-color: var(--border-primary);
  border-bottom-style: solid;
  border-bottom-width: 1px;
  background-image: none;
  box-shadow: none;
}

/* ========== #header h1 — VISUAL ONLY ========== */
/* SAFE: font-size, font-weight, letter-spacing, color only */

#header h1 {
  font-size: 15px;
  font-weight: var(--font-weight-semibold);
  letter-spacing: var(--letter-spacing);
  color: var(--text-primary);
}

#header h1 a {
  color: var(--text-primary);
  text-decoration: none;
  transition: color 0.15s ease;
}

#header h1 a:hover {
  color: var(--bg-accent);
  text-decoration: none;
}


/* ========== #header quick-search input — VISUAL ONLY ========== */

#header #quick-search #q {
  font-family: var(--font-family);
  font-size: var(--font-size-sm);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  transition: border-color 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease;
  outline: none;
}

#header #quick-search #q::placeholder {
  color: var(--text-tertiary);
}

#header #quick-search #q:focus {
  border-color: var(--border-focus);
  background-color: var(--bg-primary);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.12);
}

/* Remove Redmine default header home link background */
#header a.home {
  background-image: none;
}


/* ========== #top-menu — VISUAL ONLY ========== */
/* SAFE: background-color, font-size, border-bottom color, background-image, color only.
   NO: display, flex, height, padding, align-items, justify-content */

#top-menu {
  background-color: var(--bg-secondary);
  font-size: var(--font-size-sm);
  border-bottom-color: var(--border-secondary);
  border-bottom-style: solid;
  border-bottom-width: 1px;
  background-image: none;
  color: var(--text-secondary);
}


/* ========== #top-menu links — VISUAL ONLY ========== */

#top-menu a {
  color: var(--text-secondary);
  text-decoration: none;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-normal);
  border-radius: var(--radius-sm);
  transition: color 0.15s ease, background-color 0.15s ease;
}

#top-menu a:hover {
  color: var(--text-primary);
  background-color: var(--bg-tertiary);
  text-decoration: none;
}

#top-menu a.home {
  font-weight: var(--font-weight-medium);
}


/* ========== #account-nav — COLOR STYLES ONLY ========== */
/* SAFE: color only. NO: float, display, flex, align-items, gap, margin */

#account-nav a {
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  transition: color 0.15s ease;
}

#account-nav a:hover {
  color: var(--text-primary);
}

/* Logged-in-as text */
#account-nav .login,
#account-nav a.login {
  color: var(--text-secondary);
}

/* Gravatar in top menu — visual only */
#top-menu img.gravatar {
  border-radius: 50%;
}


/* ========== #main-menu — VISUAL ONLY ========== */
/* SAFE: background, background-image, border-bottom color only.
   NO: display, flex, padding, margin, min-height, align-items, position */

#main-menu {
  background: transparent;
  background-image: none;
  border-bottom-color: var(--border-primary);
  border-bottom-style: solid;
  border-bottom-width: 1px;
}


/* ========== #main-menu links — VISUAL ONLY ========== */

#main-menu ul li a {
  color: var(--text-secondary);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  border-bottom: 2px solid transparent;
  transition: color 0.15s ease, background-color 0.15s ease, border-bottom-color 0.15s ease;
  background: transparent;
  background-image: none;
}

#main-menu ul li a:hover {
  color: var(--text-primary);
  background-color: var(--bg-tertiary);
  text-decoration: none;
}

/* Active / selected menu item */
#main-menu ul li a.selected,
#main-menu ul li a.current {
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
  border-bottom-color: var(--bg-accent);
  background: transparent;
  background-image: none;
}

#main-menu ul li a.selected:hover,
#main-menu ul li a.current:hover {
  background-color: var(--bg-tertiary);
  border-bottom-color: var(--bg-accent);
}

/* New-object link in main menu */
#main-menu ul li a.new-object {
  color: var(--bg-accent);
  font-weight: var(--font-weight-medium);
}

#main-menu ul li a.new-object:hover {
  color: var(--bg-accent-hover);
  background-color: var(--bg-accent-subtle);
}

/* Focus ring for accessibility */
#main-menu ul li a:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: -2px;
  border-radius: var(--radius-md);
}


/* ========== #project-menu — VISUAL ONLY ========== */
/* SAFE: background, background-image, border-bottom color only.
   NO: display, flex, padding, margin, position */

#project-menu {
  background: transparent;
  background-image: none;
  border-bottom-color: var(--border-secondary);
  border-bottom-style: solid;
  border-bottom-width: 1px;
}


/* ========== #project-menu links — VISUAL ONLY ========== */

#project-menu ul li a {
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  border-bottom: 2px solid transparent;
  transition: color 0.15s ease, background-color 0.15s ease, border-bottom-color 0.15s ease;
  background: transparent;
  background-image: none;
}

#project-menu ul li a:hover {
  color: var(--text-primary);
  background-color: var(--bg-tertiary);
  text-decoration: none;
}

#project-menu ul li a.selected,
#project-menu ul li a.current {
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
  border-bottom-color: var(--bg-accent);
  background: transparent;
}

#project-menu ul li a.selected:hover,
#project-menu ul li a.current:hover {
  background-color: var(--bg-tertiary);
  border-bottom-color: var(--bg-accent);
}

#project-menu ul li a:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: -2px;
}


/* ========== #sidebar — VISUAL ONLY ========== */
/* SAFE: background-color, border-left-color only.
   NO: width, min-width, max-width, padding, flex-shrink, overflow, border-radius */

#sidebar {
  background-color: var(--bg-secondary);
  border-left-color: var(--border-primary);
  border-left-style: solid;
  border-left-width: 1px;
}


/* ========== #sidebar headings — VISUAL ONLY ========== */

#sidebar h3 {
  text-transform: uppercase;
  font-size: var(--font-size-xs);
  letter-spacing: 0.05em;
  color: var(--text-tertiary);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  border-bottom: none;
}


/* ========== #sidebar links — VISUAL ONLY ========== */

#sidebar a {
  color: var(--text-secondary);
  text-decoration: none;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-normal);
  transition: color 0.15s ease;
}

#sidebar a:hover {
  color: var(--text-primary);
  text-decoration: none;
}

#sidebar a:active {
  color: var(--bg-accent);
}

/* Active/selected sidebar link */
#sidebar a.selected {
  color: var(--bg-accent);
  font-weight: var(--font-weight-medium);
}

#sidebar ul li a {
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
  transition: color 0.15s ease, background-color 0.15s ease;
}

#sidebar ul li a:hover {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
}


/* ========== #sidebar form elements — VISUAL ONLY ========== */

#sidebar select {
  font-family: var(--font-family);
  font-size: var(--font-size-sm);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

#sidebar select:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.12);
  outline: none;
}

#sidebar input[type="text"],
#sidebar input[type="search"] {
  font-family: var(--font-family);
  font-size: var(--font-size-sm);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

#sidebar input[type="text"]:focus,
#sidebar input[type="search"]:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.12);
  outline: none;
}

#sidebar label {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  font-weight: var(--font-weight-medium);
}

/* Sidebar small text / counts */
#sidebar span.count {
  color: var(--text-tertiary);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-normal);
}

/* Sidebar icon links */
#sidebar a.icon,
#sidebar a.icon-only {
  color: var(--text-secondary);
  transition: color 0.15s ease;
}

#sidebar a.icon:hover,
#sidebar a.icon-only:hover {
  color: var(--bg-accent);
}

/* Sidebar toggler */
#sidebar .toggle-sidebar {
  color: var(--text-tertiary);
  font-size: var(--font-size-xs);
  transition: color 0.15s ease;
}

#sidebar .toggle-sidebar:hover {
  color: var(--text-secondary);
}


/* ========== #footer — VISUAL ONLY ========== */
/* SAFE: background, border-top color, color, font-size, background-image only.
   NO: padding, text-align, margin, line-height on structural #footer */

#footer {
  background: transparent;
  border-top-color: var(--border-primary);
  border-top-style: solid;
  border-top-width: 1px;
  color: var(--text-tertiary);
  font-size: var(--font-size-xs);
  background-image: none;
}

#footer a {
  color: var(--text-tertiary);
  text-decoration: none;
  transition: color 0.15s ease;
}

#footer a:hover {
  color: var(--text-secondary);
  text-decoration: underline;
}


/* ========== #content headings — VISUAL ONLY ========== */
/* SAFE: font-size, font-weight, color, letter-spacing, line-height, border-bottom only.
   NO: margin, padding */

#content h2 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  letter-spacing: var(--letter-spacing);
  line-height: var(--line-height-tight);
  border-bottom: none;
}

#content h3 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  letter-spacing: var(--letter-spacing);
  line-height: var(--line-height-tight);
}

#content h4 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  letter-spacing: var(--letter-spacing);
  line-height: var(--line-height-tight);
}
/* ============================================================================
   PART 2: Issues, Forms, Buttons, Tables, Pagination, Activity, Progress
   WS Redmine Theme — Linear.app-Inspired

   Dependencies: Part 1 must be loaded first (provides :root variables)
   This file: LIGHT MODE ONLY — dark mode overrides are in Part 4
   ============================================================================ */


/* ============================================================================
   1. ISSUES LIST — table.issues, table.list
   The most important view in Redmine. Linear-style clean table.
   ============================================================================ */

/* --- Auto-scroll container for wide tables --- */
.autoscroll {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* --- Base table styles --- */
table.issues,
table.list {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: transparent;
  border: none;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
}

/* --- Remove default Redmine borders and backgrounds --- */
table.issues,
table.issues tr,
table.issues td,
table.issues th,
table.list,
table.list tr,
table.list td,
table.list th {
  border-left: none;
  border-right: none;
}

/* --- Table header --- */
table.issues thead th,
table.list thead th {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-tertiary);
  padding: 8px 12px;
  border-top: none;
  border-bottom: 2px solid var(--border-primary);
  background: transparent;
  text-align: left;
  white-space: nowrap;
  vertical-align: middle;
  position: sticky;
  top: 0;
  z-index: 1;
}

/* Sort link in headers */
table.issues thead th a,
table.list thead th a {
  color: var(--text-tertiary);
  text-decoration: none;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

table.issues thead th a:hover,
table.list thead th a:hover {
  color: var(--text-secondary);
}

/* Sort arrow indicators */
table.issues thead th.sort.asc a::after,
table.list thead th.sort.asc a::after {
  content: " \25B2";
  font-size: 9px;
  color: var(--text-tertiary);
}

table.issues thead th.sort.desc a::after,
table.list thead th.sort.desc a::after {
  content: " \25BC";
  font-size: 9px;
  color: var(--text-tertiary);
}

/* --- Table body rows --- */
table.issues tbody tr,
table.list tbody tr {
  border-bottom: 1px solid var(--border-secondary);
  transition: background-color 0.1s ease;
}

table.issues tbody td,
table.list tbody td {
  padding: 10px 12px;
  font-size: var(--font-size-base);
  color: var(--text-primary);
  vertical-align: middle;
  border-bottom: 1px solid var(--border-secondary);
  border-top: none;
  line-height: var(--line-height-normal);
  background: transparent;
}

/* --- Row hover --- */
table.issues tbody tr.issue:hover,
table.issues tbody tr:hover,
table.list tbody tr:hover {
  background: var(--bg-tertiary);
}

/* --- Even/odd row alternating (very subtle or transparent) --- */
table.issues tbody tr.even,
table.list tbody tr.even {
  background: transparent;
}

table.issues tbody tr.odd,
table.list tbody tr.odd {
  background: transparent;
}

/* Subtle alternating for large lists */
table.issues tbody tr.even:not(:hover),
table.list tbody tr.even:not(:hover) {
  background: var(--bg-secondary);
}

/* --- Checkbox column --- */
table.issues td.checkbox,
table.list td.checkbox {
  width: 32px;
  padding-left: 12px;
  padding-right: 4px;
  text-align: center;
}

table.issues td.checkbox input[type="checkbox"],
table.list td.checkbox input[type="checkbox"] {
  margin: 0;
  vertical-align: middle;
}

table.issues th.checkbox,
table.list th.checkbox {
  width: 32px;
  padding-left: 12px;
  padding-right: 4px;
  text-align: center;
}

/* --- Subject column --- */
table.issues td.subject {
  max-width: 400px;
}

table.issues td.subject a {
  color: var(--text-primary);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  transition: color 0.15s ease;
}

table.issues td.subject a:hover {
  color: var(--bg-accent);
}

/* Indent levels for subtasks */
table.issues td.subject .expander {
  cursor: pointer;
  color: var(--text-tertiary);
  margin-right: 4px;
}

/* --- Status column — pill/badge style --- */
table.issues td.status span,
table.issues td.status {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
}

table.issues td.status span {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--bg-tertiary);
  line-height: 1.4;
  white-space: nowrap;
}

/* --- Tracker column — lighter badge --- */
table.issues td.tracker span,
table.issues td.tracker {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
}

table.issues td.tracker span {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
  line-height: 1.4;
  white-space: nowrap;
}

/* --- Priority column — colored text by priority class --- */
table.issues td.priority {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  white-space: nowrap;
}

/* Priority indicators via row classes */
table.issues tr.priority-highest td.priority,
table.issues tr.priority-5 td.priority {
  color: var(--priority-urgent);
}

table.issues tr.priority-high td.priority,
table.issues tr.priority-4 td.priority {
  color: var(--priority-high);
}

table.issues tr.priority-default td.priority,
table.issues tr.priority-normal td.priority,
table.issues tr.priority-3 td.priority {
  color: var(--priority-normal);
}

table.issues tr.priority-low td.priority,
table.issues tr.priority-2 td.priority {
  color: var(--priority-low);
}

table.issues tr.priority-lowest td.priority,
table.issues tr.priority-1 td.priority {
  color: var(--priority-low);
}

/* Priority with colored dot prefix */
table.issues tr.priority-highest td.priority::before,
table.issues tr.priority-5 td.priority::before {
  content: "";
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--priority-urgent);
  margin-right: 6px;
  vertical-align: middle;
}

table.issues tr.priority-high td.priority::before,
table.issues tr.priority-4 td.priority::before {
  content: "";
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--priority-high);
  margin-right: 6px;
  vertical-align: middle;
}

table.issues tr.priority-default td.priority::before,
table.issues tr.priority-normal td.priority::before,
table.issues tr.priority-3 td.priority::before {
  content: "";
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--priority-normal);
  margin-right: 6px;
  vertical-align: middle;
}

table.issues tr.priority-low td.priority::before,
table.issues tr.priority-2 td.priority::before {
  content: "";
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--priority-low);
  margin-right: 6px;
  vertical-align: middle;
}

table.issues tr.priority-lowest td.priority::before,
table.issues tr.priority-1 td.priority::before {
  content: "";
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--priority-low);
  margin-right: 6px;
  vertical-align: middle;
}

/* --- Assigned to column --- */
table.issues td.assigned_to {
  font-size: var(--font-size-base);
  color: var(--text-primary);
  white-space: nowrap;
}

table.issues td.assigned_to a {
  color: var(--text-primary);
  text-decoration: none;
}

table.issues td.assigned_to a:hover {
  color: var(--bg-accent);
}

/* --- Date columns --- */
table.issues td.updated_on,
table.issues td.created_on,
table.issues td.start_date,
table.issues td.due_date {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  white-space: nowrap;
}

/* --- Done ratio column --- */
table.issues td.done_ratio {
  width: 80px;
}

table.issues td.done_ratio table.progress {
  width: 100%;
}

/* --- ID column --- */
table.issues td.id {
  white-space: nowrap;
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
}

table.issues td.id a {
  color: var(--text-tertiary);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
}

table.issues td.id a:hover {
  color: var(--bg-accent);
}

/* --- Category column --- */
table.issues td.category {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

/* --- Version/Target column --- */
table.issues td.fixed_version {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

table.issues td.fixed_version a {
  color: var(--text-secondary);
  text-decoration: none;
}

table.issues td.fixed_version a:hover {
  color: var(--bg-accent);
}

/* --- Estimated / Spent time columns --- */
table.issues td.estimated_hours,
table.issues td.spent_hours,
table.issues td.total_estimated_hours,
table.issues td.total_spent_hours {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  text-align: right;
  white-space: nowrap;
}

/* --- Closed/resolved issues: subtle strikethrough or muted --- */
table.issues tr.closed td.subject a {
  color: var(--text-tertiary);
  text-decoration: line-through;
}

table.issues tr.closed td {
  color: var(--text-tertiary);
}

/* --- Selected row (when checkbox is checked) --- */
table.issues tr.context-menu-selection td,
table.issues tr.hascontextmenu.context-menu-selection td {
  background: var(--bg-accent-subtle);
}

/* --- Group headers in issue list --- */
table.issues tr.group td {
  padding: 12px 12px 8px 12px;
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
}

table.issues tr.group td a {
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: var(--font-weight-semibold);
}

table.issues tr.group td span.count {
  color: var(--text-tertiary);
  font-weight: var(--font-weight-normal);
  font-size: var(--font-size-xs);
  margin-left: 4px;
}

/* --- Total row at bottom of issues list --- */
table.issues tfoot td {
  padding: 10px 12px;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--text-secondary);
  border-top: 2px solid var(--border-primary);
  background: transparent;
}


/* ============================================================================
   2. ISSUE DETAIL PAGE
   Linear-style clean detail view with clear hierarchy
   ============================================================================ */

/* --- Issue title --- */
.issue h2,
.issue .subject h3,
div.issue h2,
#content .issue h2 {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
  color: var(--text-primary);
  margin-bottom: var(--space-4);
  margin-top: 0;
}

/* Issue subject when it has a tracker prefix */
.issue .subject h3 {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
  color: var(--text-primary);
  margin-bottom: var(--space-4);
  margin-top: 0;
}

/* Tracker badge next to issue title */
.issue .tracker-name,
.issue h2 .tracker-name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--bg-accent);
  background: var(--bg-accent-subtle);
  padding: 2px 8px;
  border-radius: 10px;
  margin-right: 8px;
  vertical-align: middle;
}

/* --- Issue details section --- */
.issue .details,
div.issue .details {
  margin-bottom: var(--space-6);
}

/* Author and creation info */
.issue .details .author {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  margin-bottom: var(--space-4);
}

.issue .details .author a {
  color: var(--text-primary);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
}

.issue .details .author a:hover {
  color: var(--bg-accent);
}

/* --- Attributes grid --- */
.issue .attributes,
div.issue .attributes {
  margin-bottom: var(--space-6);
}

.issue .attributes table {
  width: 100%;
  border-collapse: collapse;
}

.issue .attributes table td {
  padding: 6px 12px 6px 0;
  vertical-align: top;
  border: none;
}

.issue .attributes table td.label,
.issue .attributes .label,
.issue .attribute .label {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  min-width: 120px;
  white-space: nowrap;
  padding-right: var(--space-3);
}

.issue .attributes table td.value,
.issue .attributes .value,
.issue .attribute .value {
  color: var(--text-primary);
  font-size: var(--font-size-base);
}

.issue .attribute {
  display: flex;
  align-items: baseline;
  margin-bottom: var(--space-2);
}

/* Split attributes into two columns */
.issue .attributes .splitcontent {
  display: flex;
  gap: var(--space-8);
}

.issue .attributes .splitcontentleft,
.issue .attributes .splitcontentright {
  flex: 1;
}

/* --- Issue description --- */
div.issue div.description,
.issue .description {
  margin-top: var(--space-6);
  padding-top: var(--space-6);
  border-top: 1px solid var(--border-primary);
}

.issue div.description p.label,
.issue .description > .label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: var(--space-2);
}

.issue .description .wiki {
  font-size: var(--font-size-md);
  line-height: var(--line-height-relaxed);
  color: var(--text-primary);
}

.issue .description .wiki p {
  margin-bottom: var(--space-3);
}

/* --- Related issues --- */
.issue .relations,
div#relations {
  margin-top: var(--space-6);
}

div#relations .contextual {
  float: right;
}

.issue .relations table td {
  padding: 6px 8px;
  border: none;
  font-size: var(--font-size-base);
}

.issue .relations table td a {
  color: var(--text-primary);
  text-decoration: none;
}

.issue .relations table td a:hover {
  color: var(--bg-accent);
}

/* --- Subtasks --- */
div#issue_tree {
  margin-top: var(--space-6);
}

div#issue_tree table.list td {
  padding: 6px 8px;
}

/* --- Issue changesets --- */
#issue-changesets,
div#issue-changesets {
  margin-top: var(--space-8);
}

#issue-changesets h3 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-4);
}

#issue-changesets .changeset {
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--border-secondary);
  font-size: var(--font-size-sm);
}

#issue-changesets .changeset p {
  margin: var(--space-1) 0;
}

/* --- History / Journal entries --- */
#history,
div#history {
  margin-top: var(--space-8);
}

#history h3 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-4);
}

.journal,
div.journal {
  border-bottom: 1px solid var(--border-secondary);
  padding: var(--space-4) 0;
}

.journal:last-child {
  border-bottom: none;
}

/* Journal header: user + timestamp */
.journal h4,
.journal .journal-header {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-normal);
  color: var(--text-secondary);
  margin-bottom: var(--space-2);
}

.journal .user,
.journal h4 a.user {
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  text-decoration: none;
}

.journal .user:hover,
.journal h4 a.user:hover {
  color: var(--bg-accent);
}

.journal .journal-link,
.journal h4 a.journal-link {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  text-decoration: none;
  margin-left: var(--space-2);
}

.journal .journal-link:hover,
.journal h4 a.journal-link:hover {
  color: var(--bg-accent);
}

/* Journal content (wiki text) */
.journal .wiki {
  margin-top: var(--space-2);
  font-size: var(--font-size-base);
  line-height: var(--line-height-relaxed);
  color: var(--text-primary);
}

.journal .wiki p {
  margin-bottom: var(--space-2);
}

/* Journal details — attribute changes */
.journal ul.details,
.journal .details {
  margin: var(--space-2) 0;
  padding-left: var(--space-5);
}

.journal ul.details li {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  margin-bottom: var(--space-1);
  line-height: var(--line-height-normal);
}

.journal ul.details li strong {
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
}

.journal ul.details li .old-value {
  text-decoration: line-through;
  color: var(--text-tertiary);
}

.journal ul.details li .new-value {
  color: var(--text-primary);
}

/* Private notes */
.journal.private-notes {
  background: var(--bg-accent-subtle);
  padding: var(--space-4);
  border-radius: var(--radius-md);
  margin: var(--space-2) 0;
}

/* --- Contextual links (edit, delete, quote, etc.) --- */
div.contextual,
.contextual {
  float: right;
  font-size: var(--font-size-sm);
  line-height: 1.4;
}

div.contextual a,
.contextual a {
  color: var(--text-tertiary);
  text-decoration: none;
  margin-left: var(--space-2);
  transition: color 0.15s ease;
}

div.contextual a:hover,
.contextual a:hover {
  color: var(--text-primary);
}

/* --- Issue attachments --- */
.issue .attachments,
div.attachments {
  margin-top: var(--space-4);
}

div.attachments table {
  width: 100%;
}

div.attachments table td {
  padding: 4px 8px;
  font-size: var(--font-size-sm);
  border: none;
}

div.attachments table td.filename a {
  color: var(--bg-accent);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
}

div.attachments table td.filename a:hover {
  text-decoration: underline;
}

div.attachments table td.filesize {
  color: var(--text-tertiary);
  font-size: var(--font-size-xs);
  white-space: nowrap;
}

div.attachments table td.author {
  color: var(--text-secondary);
}

/* --- Watchers --- */
div#watchers {
  margin-top: var(--space-4);
}

div#watchers ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

div#watchers ul li {
  padding: var(--space-1) 0;
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

div#watchers ul li a.user {
  color: var(--text-primary);
  text-decoration: none;
}

div#watchers ul li a.delete {
  color: var(--text-tertiary);
  font-size: var(--font-size-xs);
  margin-left: var(--space-1);
}

div#watchers ul li a.delete:hover {
  color: var(--status-red);
}


/* ============================================================================
   3. ALL FORM ELEMENTS
   Clean, modern form styling inspired by Linear.app
   ============================================================================ */

/* --- Text-type inputs --- */
input[type="text"],
input[type="password"],
input[type="email"],
input[type="url"],
input[type="search"],
input[type="number"],
input[type="tel"],
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 6px 10px;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
  color: var(--text-primary);
  line-height: var(--line-height-normal);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  box-sizing: border-box;
  -webkit-appearance: none;
}

input[type="text"]:focus,
input[type="password"]:focus,
input[type="email"]:focus,
input[type="url"]:focus,
input[type="search"]:focus,
input[type="number"]:focus,
input[type="tel"]:focus,
input[type="date"]:focus,
input[type="time"]:focus,
input[type="datetime-local"]:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.15);
  outline: none;
}

input[type="text"]::placeholder,
input[type="password"]::placeholder,
input[type="email"]::placeholder,
input[type="url"]::placeholder,
input[type="search"]::placeholder,
input[type="number"]::placeholder,
input[type="tel"]::placeholder {
  color: var(--text-tertiary);
}

input[type="text"]:disabled,
input[type="password"]:disabled,
input[type="email"]:disabled,
input[type="number"]:disabled {
  background: var(--bg-secondary);
  color: var(--text-tertiary);
  cursor: not-allowed;
  border-color: var(--border-secondary);
}

/* --- Select dropdowns --- */
select {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 6px 32px 6px 10px;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
  color: var(--text-primary);
  line-height: var(--line-height-normal);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  box-sizing: border-box;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%239CA0A8' d='M3.4 4.5L6 7.1l2.6-2.6.8.8L6 8.7 2.6 5.3z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 12px;
  cursor: pointer;
}

select:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.15);
  outline: none;
}

select:disabled {
  background-color: var(--bg-secondary);
  color: var(--text-tertiary);
  cursor: not-allowed;
  border-color: var(--border-secondary);
}

select[multiple] {
  padding: 6px 10px;
  background-image: none;
  height: auto;
  min-height: 80px;
}

select[multiple] option {
  padding: 4px 6px;
  border-radius: var(--radius-sm);
}

/* --- Textarea --- */
textarea {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 8px 10px;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
  color: var(--text-primary);
  line-height: var(--line-height-normal);
  min-height: 120px;
  resize: vertical;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  box-sizing: border-box;
  width: 100%;
}

textarea:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.15);
  outline: none;
}

textarea::placeholder {
  color: var(--text-tertiary);
}

textarea:disabled {
  background: var(--bg-secondary);
  color: var(--text-tertiary);
  cursor: not-allowed;
}

/* --- Checkboxes and radios --- */
input[type="checkbox"],
input[type="radio"] {
  accent-color: var(--bg-accent);
  width: 14px;
  height: 14px;
  cursor: pointer;
  vertical-align: middle;
  margin-right: 4px;
}

input[type="checkbox"]:focus,
input[type="radio"]:focus {
  outline: 2px solid rgba(94, 106, 210, 0.3);
  outline-offset: 1px;
}

/* --- File input --- */
input[type="file"] {
  font-size: var(--font-size-sm);
  font-family: var(--font-family);
  color: var(--text-secondary);
  padding: var(--space-1) 0;
}

/* --- Labels --- */
label {
  font-size: var(--font-size-base);
  color: var(--text-secondary);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
}

/* --- Tabular form layout (Redmine's standard form layout) --- */
.tabular p,
.tabular.settings p {
  margin-bottom: var(--space-3);
}

.tabular label,
.tabular.settings label {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  font-weight: var(--font-weight-medium);
  display: inline-block;
  min-width: 180px;
  text-align: right;
  padding-right: var(--space-3);
  vertical-align: top;
}

/* Required field indicator */
.tabular label .required,
label .required {
  color: var(--status-red);
  font-weight: var(--font-weight-normal);
}

/* Hint text below fields */
.tabular p em,
p.hint,
em.info {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
  font-style: normal;
  display: block;
  margin-top: var(--space-1);
}

/* --- Fieldsets --- */
fieldset {
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  margin-bottom: var(--space-5);
  background: transparent;
}

fieldset legend {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  padding: 0 var(--space-2);
}

fieldset fieldset {
  border-color: var(--border-secondary);
  margin-bottom: var(--space-3);
  padding: var(--space-4);
}

/* Collapsible fieldsets (Redmine 5.x+) */
fieldset.collapsible legend {
  cursor: pointer;
}

fieldset.collapsible.collapsed {
  border-bottom-width: 1px;
  padding-bottom: var(--space-2);
}

/* --- Error messages on forms --- */
#errorExplanation,
div.flash.error,
.errorExplanation {
  border: 1px solid var(--status-red);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  margin-bottom: var(--space-5);
  background: rgba(239, 68, 68, 0.05);
}

#errorExplanation h2,
.errorExplanation h2 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--status-red);
  margin-bottom: var(--space-2);
}

#errorExplanation ul,
.errorExplanation ul {
  margin: 0;
  padding-left: var(--space-5);
}

#errorExplanation ul li,
.errorExplanation ul li {
  font-size: var(--font-size-sm);
  color: var(--status-red);
  margin-bottom: var(--space-1);
}

/* Highlight fields with errors */
.tabular p.error label {
  color: var(--status-red);
}

input.error,
select.error,
textarea.error,
.tabular p.error input,
.tabular p.error select,
.tabular p.error textarea {
  border-color: var(--status-red);
}

input.error:focus,
select.error:focus,
textarea.error:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.15);
}

/* --- Wiki toolbar (for textarea editors) --- */
.jstEditor {
  margin-bottom: 0;
}

.jstEditor .jstElements {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-bottom: none;
  border-radius: var(--radius-md) var(--radius-md) 0 0;
  padding: var(--space-1) var(--space-2);
}

.jstEditor .jstElements button {
  background: transparent;
  border: none;
  padding: 4px 6px;
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.jstEditor .jstElements button:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.jstEditor textarea {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

/* --- Inline edit form (issue detail) --- */
.edit-issue-form input[type="text"],
.edit-issue-form select,
.edit-issue-form textarea {
  width: 100%;
}

/* --- Search form --- */
#search-form input[type="text"],
input#search-input {
  border-radius: var(--radius-lg);
  padding: 6px 14px;
  min-width: 200px;
}

/* --- Quick search in header --- */
#quick-search input[type="text"] {
  border-radius: var(--radius-lg);
  padding: 4px 12px;
  font-size: var(--font-size-sm);
  background: var(--bg-secondary);
  border-color: var(--border-secondary);
}

#quick-search input[type="text"]:focus {
  background: var(--bg-primary);
  border-color: var(--border-focus);
}


/* ============================================================================
   4. ALL BUTTONS
   Primary (accent purple), Secondary (subtle), Destructive (red)
   ============================================================================ */

/* --- Primary buttons --- */
input[type="submit"],
input[type="button"],
button:not(.jstElements button),
.button,
a.button {
  background: var(--bg-accent);
  color: var(--text-on-accent);
  border: none;
  border-radius: var(--radius-md);
  padding: 6px 14px;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  cursor: pointer;
  transition: all 0.15s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  text-decoration: none;
  line-height: var(--line-height-normal);
  vertical-align: middle;
  white-space: nowrap;
  -webkit-appearance: none;
}

input[type="submit"]:hover,
input[type="button"]:hover,
button:not(.jstElements button):hover,
.button:hover,
a.button:hover {
  background: var(--bg-accent-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
  color: var(--text-on-accent);
  text-decoration: none;
}

input[type="submit"]:active,
input[type="button"]:active,
button:not(.jstElements button):active,
.button:active,
a.button:active {
  transform: translateY(0);
  box-shadow: none;
}

input[type="submit"]:focus,
input[type="button"]:focus,
button:not(.jstElements button):focus,
.button:focus,
a.button:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.3);
}

input[type="submit"]:disabled,
input[type="button"]:disabled,
button:disabled,
.button:disabled,
a.button.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* --- Secondary / contextual buttons --- */
.contextual a,
a.icon-only,
a.icon {
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 4px 10px;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  text-decoration: none;
  transition: all 0.15s ease;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  line-height: var(--line-height-normal);
  vertical-align: middle;
}

.contextual a:hover,
a.icon-only:hover,
a.icon:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  text-decoration: none;
  border-color: var(--border-primary);
}

.contextual a:active,
a.icon-only:active,
a.icon:active {
  background: var(--bg-secondary);
}

/* Reset contextual link inside issue detail (they don't all need border) */
div.contextual a {
  border: none;
  padding: 2px 6px;
}

div.contextual a:hover {
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
}

/* --- Destructive buttons --- */
a.icon-del,
a.icon.icon-del,
input.delete,
a.delete,
input[type="submit"].delete {
  color: var(--status-red);
  background: transparent;
  border: 1px solid transparent;
  transition: all 0.15s ease;
}

a.icon-del:hover,
a.icon.icon-del:hover,
input.delete:hover,
a.delete:hover,
input[type="submit"].delete:hover {
  background: rgba(239, 68, 68, 0.1);
  color: var(--status-red);
  border-color: rgba(239, 68, 68, 0.2);
}

/* --- Button groups --- */
.buttons,
p.buttons {
  display: flex;
  gap: var(--space-2);
  align-items: center;
  margin-top: var(--space-4);
  flex-wrap: wrap;
}

/* Cancel link next to submit buttons */
.buttons a,
p.buttons a {
  color: var(--text-secondary);
  text-decoration: none;
  font-size: var(--font-size-base);
  padding: 6px 10px;
  transition: color 0.15s ease;
}

.buttons a:hover,
p.buttons a:hover {
  color: var(--text-primary);
}

/* --- "New issue" / "New" buttons specifically --- */
a.icon.icon-add {
  background: var(--bg-accent);
  color: var(--text-on-accent);
  border: none;
  padding: 6px 12px;
  font-weight: var(--font-weight-medium);
}

a.icon.icon-add:hover {
  background: var(--bg-accent-hover);
  color: var(--text-on-accent);
}

/* --- Toggle / small action links in issue forms --- */
a.toggle-multiselect,
a.toggle-checkboxes {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
  text-decoration: none;
  border: none;
  background: none;
  padding: 0;
}

a.toggle-multiselect:hover,
a.toggle-checkboxes:hover {
  color: var(--bg-accent);
}

/* --- Redmine's icon classes on buttons/links --- */
input[type="submit"].icon,
a.icon {
  padding-left: 20px;
  background-repeat: no-repeat;
  background-position: 6px center;
}


/* ============================================================================
   5. ALL GENERAL TABLES
   Clean style matching issues table but generic
   ============================================================================ */

/* --- General tables --- */
table.filecontent,
table.files,
table.time-entries,
table.versions,
table.members,
table.plugins,
table.roles,
table.trackers,
table.workflows,
table.enumerations {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
}

/* --- Table headers (general) --- */
table.filecontent thead th,
table.files thead th,
table.time-entries thead th,
table.versions thead th,
table.members thead th,
table.plugins thead th,
table.roles thead th,
table.trackers thead th {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-tertiary);
  padding: 8px 12px;
  border-bottom: 2px solid var(--border-primary);
  background: transparent;
  text-align: left;
  white-space: nowrap;
}

/* --- Table cells (general) --- */
table.filecontent td,
table.files td,
table.time-entries td,
table.versions td,
table.members td,
table.plugins td,
table.roles td,
table.trackers td {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-secondary);
  color: var(--text-primary);
  font-size: var(--font-size-base);
  vertical-align: middle;
}

/* --- Row hover (general) --- */
table.filecontent tbody tr:hover,
table.files tbody tr:hover,
table.time-entries tbody tr:hover,
table.versions tbody tr:hover,
table.members tbody tr:hover {
  background: var(--bg-tertiary);
}

/* --- Sort indicators for general tables --- */
table.list thead th.sort a {
  color: var(--text-secondary);
}

table.list thead th.sort.asc a::after {
  content: " \25B2";
  font-size: 9px;
}

table.list thead th.sort.desc a::after {
  content: " \25BC";
  font-size: 9px;
}

/* --- Repository / files table specifics --- */
table.filecontent {
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
}

table.filecontent td.line-num {
  color: var(--text-tertiary);
  text-align: right;
  padding-right: var(--space-3);
  user-select: none;
  -webkit-user-select: none;
  width: 1%;
  white-space: nowrap;
  border-right: 1px solid var(--border-secondary);
}

table.filecontent td.line-code {
  padding-left: var(--space-3);
  white-space: pre;
}

/* --- Files list --- */
table.files td.filename a {
  color: var(--bg-accent);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
}

table.files td.filename a:hover {
  text-decoration: underline;
}

table.files td.filesize {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  white-space: nowrap;
  text-align: right;
}

/* --- Time entries table --- */
table.time-entries td.hours {
  font-weight: var(--font-weight-semibold);
  text-align: right;
  white-space: nowrap;
}

table.time-entries td.activity {
  color: var(--text-secondary);
}

table.time-entries td.comments {
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* --- Admin tables --- */
table.plugins td,
table.roles td,
table.trackers td,
table.enumerations td {
  font-size: var(--font-size-base);
}

table.plugins td a,
table.roles td a,
table.trackers td a {
  color: var(--text-primary);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
}

table.plugins td a:hover,
table.roles td a:hover,
table.trackers td a:hover {
  color: var(--bg-accent);
}

/* --- Settings table --- */
table.settings td {
  padding: 6px 12px;
  border-bottom: 1px solid var(--border-secondary);
  font-size: var(--font-size-base);
}

/* --- Versions table --- */
table.versions td.name a {
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  text-decoration: none;
}

table.versions td.name a:hover {
  color: var(--bg-accent);
}

table.versions td.date {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  white-space: nowrap;
}

/* --- Wiki diff table --- */
table.diff {
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  border-collapse: collapse;
}

table.diff td {
  padding: 1px 8px;
  border: none;
  vertical-align: top;
}

table.diff td.line-num {
  color: var(--text-tertiary);
  text-align: right;
  padding-right: var(--space-2);
  user-select: none;
  -webkit-user-select: none;
  border-right: 1px solid var(--border-secondary);
  min-width: 35px;
}

/* Diff additions and deletions */
table.diff td ins,
table.diff span.ins {
  background: rgba(76, 175, 80, 0.15);
  text-decoration: none;
}

table.diff td del,
table.diff span.del {
  background: rgba(239, 68, 68, 0.15);
  text-decoration: line-through;
}


/* ============================================================================
   6. PAGINATION
   Clean, minimal pagination controls
   ============================================================================ */

.pagination {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  margin: var(--space-5) 0;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
  flex-wrap: wrap;
}

.pagination a,
.pagination span {
  padding: 4px 10px;
  border-radius: var(--radius-md);
  text-decoration: none;
  transition: all 0.15s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  min-height: 28px;
  font-size: var(--font-size-base);
}

/* Current page */
.pagination span.current {
  background: var(--bg-accent);
  color: var(--text-on-accent);
  font-weight: var(--font-weight-medium);
}

/* Page links */
.pagination a {
  color: var(--text-secondary);
  background: transparent;
}

.pagination a:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* Previous / Next links */
.pagination a.previous,
.pagination a.next {
  font-weight: var(--font-weight-medium);
}

/* Ellipsis */
.pagination span.gap {
  color: var(--text-tertiary);
  padding: 4px 4px;
}

/* Items count */
.pagination .items,
.pagination span.items {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  margin-left: var(--space-3);
  padding: 0;
}

/* Per-page links */
.pagination .per-page {
  margin-left: auto;
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
}

.pagination .per-page a {
  font-size: var(--font-size-sm);
  min-width: auto;
  min-height: auto;
  padding: 2px 6px;
}

.pagination .per-page a.selected,
.pagination .per-page a:hover {
  background: var(--bg-tertiary);
}


/* ============================================================================
   7. ACTIVITY / HISTORY FEED
   Timeline-style activity feed
   ============================================================================ */

#activity {
  font-family: var(--font-family);
}

/* Day headers */
#activity dt,
#activity h3 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  margin-top: var(--space-5);
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--border-primary);
}

#activity dt:first-child {
  margin-top: 0;
}

/* Activity entries */
#activity dd {
  padding: var(--space-2) 0 var(--space-2) var(--space-5);
  margin: 0;
  position: relative;
}

/* Subtle left-border timeline indicator */
#activity dd::before {
  content: "";
  position: absolute;
  left: 8px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--border-secondary);
}

/* Timeline dot */
#activity dd::after {
  content: "";
  position: absolute;
  left: 5px;
  top: 14px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  border: 2px solid var(--border-primary);
}

/* Time stamp */
#activity dd span.time,
#activity dd .time {
  color: var(--text-tertiary);
  font-size: var(--font-size-sm);
  margin-left: var(--space-2);
}

/* Project link */
#activity dd a.project,
#activity dd .project {
  color: var(--text-secondary);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  font-size: var(--font-size-sm);
}

#activity dd a.project:hover {
  color: var(--bg-accent);
}

/* Activity entry title link */
#activity dd a {
  color: var(--text-primary);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
}

#activity dd a:hover {
  color: var(--bg-accent);
}

/* Activity description text */
#activity dd .description,
#activity dd span.description {
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  margin-top: var(--space-1);
  display: block;
  line-height: var(--line-height-normal);
}

/* Author in activity */
#activity dd span.author,
#activity dd .author {
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
}

#activity dd span.author a {
  color: var(--text-primary);
  font-weight: var(--font-weight-medium);
}

/* Activity checkboxes (filter) */
#activity-selector {
  margin-bottom: var(--space-4);
}

#activity-selector label {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  margin-right: var(--space-3);
}


/* ============================================================================
   8. PROGRESS BARS
   Clean, rounded progress bars
   ============================================================================ */

table.progress {
  border-collapse: collapse;
  border-radius: 10px;
  overflow: hidden;
  height: 10px;
  width: 80px;
  background: var(--bg-tertiary);
  display: inline-table;
  vertical-align: middle;
}

table.progress td {
  padding: 0;
  height: 10px;
  border: none;
}

table.progress td.closed {
  background: var(--status-green);
}

table.progress td.done {
  background: var(--bg-accent);
}

table.progress td.open {
  background: var(--bg-tertiary);
}

/* Progress percentage text */
p.percent,
span.percent {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
  margin-left: var(--space-1);
  vertical-align: middle;
}

/* Larger progress bar in issue detail */
.issue table.progress {
  width: 120px;
  height: 8px;
}

/* Roadmap version progress */
.version table.progress {
  width: 100%;
  height: 12px;
  border-radius: var(--radius-md);
}

/* Version overview progress */
#version-summary table.progress,
.version-overview table.progress {
  width: 100%;
  height: 14px;
  border-radius: var(--radius-md);
}

/* Done ratio in issue list */
table.issues td.done_ratio table.progress {
  width: 60px;
  height: 8px;
}


/* ============================================================================
   ADDITIONAL EDGE CASES & REFINEMENTS
   ============================================================================ */

/* --- Query filters (issue list filter bar) --- */
#query_form_content,
fieldset#filters-table {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
}

#query_form_content select,
fieldset#filters-table select {
  font-size: var(--font-size-sm);
}

#query_form_content input[type="text"],
fieldset#filters-table input[type="text"] {
  font-size: var(--font-size-sm);
}

/* Filter add/remove controls */
.add-filter,
a.add-filter {
  color: var(--bg-accent);
  font-size: var(--font-size-sm);
  text-decoration: none;
}

.add-filter:hover,
a.add-filter:hover {
  text-decoration: underline;
}

/* --- Column options in query settings --- */
#columns label,
#available_columns label {
  font-size: var(--font-size-sm);
}

/* --- Options (available/selected columns) --- */
select#available_columns,
select#selected_columns {
  min-height: 120px;
  width: 200px;
}

/* --- Inline editing in issue list --- */
.inline-edit input[type="text"],
.inline-edit select {
  padding: 2px 6px;
  font-size: var(--font-size-sm);
}

/* --- Bulk edit form --- */
#bulk-edit-form .tabular label {
  min-width: 140px;
}

/* --- Time log form --- */
#time-entry-form .tabular label {
  min-width: 140px;
}

/* --- Issue form layout --- */
#issue-form .tabular label {
  min-width: 160px;
}

#issue-form select,
#issue-form input[type="text"] {
  max-width: 500px;
}

#issue-form textarea {
  max-width: 100%;
}

/* --- Copy/move issue form --- */
#copy_form .tabular label,
#move_form .tabular label {
  min-width: 160px;
}

/* --- Project settings forms --- */
#project-form .tabular label {
  min-width: 180px;
}

/* --- User preferences form --- */
#user_form .tabular label,
.myaccount-form .tabular label {
  min-width: 180px;
}

/* --- Admin settings form --- */
.settings .tabular label {
  min-width: 200px;
}

/* --- Context menu (right-click on issues) --- */
#context-menu {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: var(--space-1) 0;
  min-width: 180px;
  font-size: var(--font-size-base);
  font-family: var(--font-family);
  z-index: 1000;
}

#context-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#context-menu ul li {
  padding: 0;
}

#context-menu ul li a {
  display: block;
  padding: 6px 12px;
  color: var(--text-primary);
  text-decoration: none;
  font-size: var(--font-size-base);
  transition: background-color 0.1s ease;
  border-radius: 0;
}

#context-menu ul li a:hover {
  background: var(--bg-accent);
  color: var(--text-on-accent);
}

#context-menu ul li a.icon {
  padding-left: 28px;
  background-repeat: no-repeat;
  background-position: 8px center;
  border: none;
}

/* Context menu separator */
#context-menu ul li.folder ul {
  padding-left: 0;
}

#context-menu ul li.folder > a {
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  font-size: var(--font-size-xs);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: var(--space-2) 12px var(--space-1);
  cursor: default;
}

#context-menu ul li.folder > a:hover {
  background: transparent;
  color: var(--text-secondary);
}

/* Separator line */
#context-menu li.separator {
  border-top: 1px solid var(--border-secondary);
  margin: var(--space-1) 0;
}

/* --- Tooltip / autocomplete dropdown --- */
.autocomplete,
div.autocomplete {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  max-height: 200px;
  overflow-y: auto;
  z-index: 1001;
}

.autocomplete ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.autocomplete ul li {
  padding: 6px 12px;
  font-size: var(--font-size-base);
  color: var(--text-primary);
  cursor: pointer;
  transition: background-color 0.1s ease;
}

.autocomplete ul li:hover,
.autocomplete ul li.selected {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
}

/* --- Drag handle for sortable tables --- */
.sort-handle {
  cursor: grab;
  color: var(--text-tertiary);
}

.sort-handle:active {
  cursor: grabbing;
}

/* --- Table totals row --- */
table.list tfoot td {
  padding: 10px 12px;
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  border-top: 2px solid var(--border-primary);
  border-bottom: none;
  background: transparent;
}

/* --- Empty state for tables --- */
table.list .nodata,
table.issues .nodata,
p.nodata {
  text-align: center;
  color: var(--text-tertiary);
  font-size: var(--font-size-base);
  padding: var(--space-8) var(--space-4);
}

/* --- Saved queries list --- */
.query-list,
ul.queries {
  list-style: none;
  padding: 0;
  margin: 0;
}

.query-list li,
ul.queries li {
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--border-secondary);
}

.query-list li a,
ul.queries li a {
  color: var(--text-primary);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
}

.query-list li a:hover,
ul.queries li a:hover {
  color: var(--bg-accent);
}

/* --- Image preview / thumbnails --- */
.thumbnails {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-top: var(--space-2);
}

.thumbnails a {
  display: inline-block;
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.thumbnails a:hover {
  border-color: var(--border-focus);
  box-shadow: var(--shadow-sm);
}

.thumbnails a img {
  display: block;
  max-width: 180px;
  height: auto;
}

/* --- Subtask indentation in issue list --- */
table.issues .icon-subtask {
  margin-left: 4px;
}

/* --- Quick add form at bottom of issue list --- */
tr.quick-add-issue td {
  padding: var(--space-2) var(--space-3);
}

tr.quick-add-issue input[type="text"] {
  width: 100%;
  padding: 4px 8px;
  font-size: var(--font-size-sm);
}

/* --- Token / tag input (Redmine 5.x) --- */
.token-input-list {
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  padding: 2px;
  min-height: 32px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: center;
}

.token-input-list:focus-within {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.15);
}

.token-input-list li.token-input-token {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
  border-radius: 10px;
  padding: 2px 8px;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.token-input-list li.token-input-token span {
  cursor: pointer;
  color: var(--bg-accent);
  font-weight: var(--font-weight-semibold);
}

.token-input-list li.token-input-token span:hover {
  color: var(--status-red);
}

.token-input-list li.token-input-input-token input {
  border: none;
  outline: none;
  background: transparent;
  font-size: var(--font-size-sm);
  padding: 2px 4px;
  color: var(--text-primary);
}

/* --- Confirmation dialog / overlay --- */
.ui-dialog,
.ui-widget-overlay {
  font-family: var(--font-family);
}

.ui-dialog {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
  padding: 0;
}

.ui-dialog .ui-dialog-titlebar {
  background: transparent;
  border-bottom: 1px solid var(--border-primary);
  padding: var(--space-4);
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
}

.ui-dialog .ui-dialog-content {
  padding: var(--space-5);
  font-size: var(--font-size-base);
  color: var(--text-primary);
}

.ui-dialog .ui-dialog-buttonpane {
  border-top: 1px solid var(--border-primary);
  padding: var(--space-3) var(--space-4);
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2);
}

/* --- Responsive adjustments for form layouts --- */
@media screen and (max-width: 900px) {
  .tabular label,
  .tabular.settings label {
    min-width: 140px;
    font-size: var(--font-size-xs);
  }

  table.issues td,
  table.list td {
    padding: 8px 8px;
  }

  table.issues th,
  table.list th {
    padding: 6px 8px;
  }
}

@media screen and (max-width: 600px) {
  .tabular label,
  .tabular.settings label {
    display: block;
    text-align: left;
    min-width: auto;
    margin-bottom: var(--space-1);
  }

  table.issues td.checkbox {
    display: none;
  }

  table.issues th.checkbox {
    display: none;
  }

  .pagination {
    flex-wrap: wrap;
    gap: var(--space-1);
  }

  .buttons,
  p.buttons {
    flex-direction: column;
    align-items: stretch;
  }

  .buttons input[type="submit"],
  p.buttons input[type="submit"] {
    width: 100%;
  }
}
/* ==========================================================================
   PART 3: Wiki, Flash, Login, Admin, My Page, Gantt, Calendar, Forums,
           Files, Roadmap, Time Tracking, News, Repository, Tooltips,
           Search, and Miscellaneous Special Page Styles
   ========================================================================== */


/* ==========================================================================
   1. WIKI PAGES
   ========================================================================== */

div.wiki {
  font-size: 14px;
  line-height: 1.7;
  color: var(--text-primary);
  max-width: 800px;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

div.wiki h1 {
  font-size: 1.75em;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin: 2em 0 0.75em 0;
  padding-bottom: 0.4em;
  border-bottom: 1px solid var(--border-primary);
  color: var(--text-primary);
  line-height: 1.3;
}

div.wiki h1:first-child {
  margin-top: 0;
}

div.wiki h2 {
  font-size: 1.45em;
  font-weight: 700;
  letter-spacing: -0.015em;
  margin: 1.75em 0 0.6em 0;
  color: var(--text-primary);
  line-height: 1.35;
}

div.wiki h3 {
  font-size: 1.2em;
  font-weight: 600;
  letter-spacing: -0.01em;
  margin: 1.5em 0 0.5em 0;
  color: var(--text-primary);
  line-height: 1.4;
}

div.wiki h4 {
  font-size: 1.05em;
  font-weight: 600;
  letter-spacing: -0.005em;
  margin: 1.25em 0 0.4em 0;
  color: var(--text-primary);
  line-height: 1.45;
}

div.wiki h5 {
  font-size: 0.95em;
  font-weight: 600;
  margin: 1em 0 0.35em 0;
  color: var(--text-secondary);
  line-height: 1.5;
}

div.wiki h6 {
  font-size: 0.85em;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  margin: 1em 0 0.3em 0;
  color: var(--text-tertiary);
  line-height: 1.5;
}

div.wiki p {
  margin: 0 0 1em 0;
}

div.wiki ul,
div.wiki ol {
  padding-left: 1.75em;
  margin: 0 0 1em 0;
}

div.wiki ul {
  list-style: disc;
}

div.wiki ol {
  list-style: decimal;
}

div.wiki ul ul {
  list-style: circle;
}

div.wiki ul ul ul {
  list-style: square;
}

div.wiki li {
  margin-bottom: 0.25em;
}

div.wiki li > ul,
div.wiki li > ol {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}

div.wiki a {
  color: var(--bg-accent);
  text-decoration: none;
  transition: color 0.15s ease;
}

div.wiki a:hover {
  color: var(--bg-accent-hover);
  text-decoration: underline;
}

div.wiki a.new {
  color: var(--priority-high);
}

div.wiki pre {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 14px 16px;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: 12.5px;
  line-height: 1.6;
  tab-size: 4;
  margin: 0 0 1em 0;
  color: var(--text-primary);
}

div.wiki pre code {
  background: none;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
  color: inherit;
}

div.wiki code {
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: 0.88em;
  color: var(--text-primary);
}

div.wiki blockquote {
  border-left: 3px solid var(--bg-accent);
  padding: 8px 16px;
  margin: 0 0 1em 0;
  color: var(--text-secondary);
  background: var(--bg-secondary);
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
}

div.wiki blockquote p:last-child {
  margin-bottom: 0;
}

div.wiki table {
  border-collapse: collapse;
  margin: 0 0 1em 0;
  width: auto;
}

div.wiki table th {
  padding: 8px 12px;
  border: 1px solid var(--border-primary);
  background: var(--bg-tertiary);
  color: var(--text-primary);
  font-weight: 600;
  font-size: 13px;
  text-align: left;
}

div.wiki table td {
  padding: 8px 12px;
  border: 1px solid var(--border-primary);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: 13px;
}

div.wiki table tr:nth-child(even) td {
  background: var(--bg-secondary);
}

div.wiki img {
  max-width: 100%;
  height: auto;
  border-radius: var(--radius-sm);
}

div.wiki hr {
  border: none;
  height: 1px;
  background: var(--border-primary);
  margin: 2em 0;
}

div.wiki .toc {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 12px 16px;
  font-size: 13px;
  margin-bottom: 1.5em;
}

div.wiki .toc a {
  color: var(--text-secondary);
  text-decoration: none;
}

div.wiki .toc a:hover {
  color: var(--bg-accent);
}

div.wiki .toc ul {
  list-style: none;
  padding-left: 1.25em;
  margin: 0.25em 0;
}

div.wiki .toc > ul {
  padding-left: 0;
}

div.wiki a.wiki-anchor {
  color: var(--text-tertiary);
  text-decoration: none;
  opacity: 0;
  transition: opacity 0.15s ease;
  margin-left: 4px;
  font-size: 0.85em;
}

div.wiki h1:hover a.wiki-anchor,
div.wiki h2:hover a.wiki-anchor,
div.wiki h3:hover a.wiki-anchor,
div.wiki h4:hover a.wiki-anchor,
div.wiki h5:hover a.wiki-anchor,
div.wiki h6:hover a.wiki-anchor {
  opacity: 1;
}

/* Syntax highlighting for code blocks */
div.wiki pre .line-num {
  color: var(--text-tertiary);
  user-select: none;
  padding-right: 12px;
  text-align: right;
  min-width: 2.5em;
  display: inline-block;
}


/* ==========================================================================
   2. FLASH MESSAGES
   ========================================================================== */

@keyframes flashSlideIn {
  0% {
    opacity: 0;
    transform: translateY(-8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

#flash_notice,
#flash_error,
#flash_warning,
div.flash {
  padding: 10px 14px;
  border-radius: var(--radius-md);
  margin-bottom: 16px;
  font-size: 13px;
  line-height: 1.5;
  animation: flashSlideIn 0.25s ease-out;
}

#flash_notice,
div.flash.notice {
  background: rgba(76, 175, 80, 0.1);
  border: 1px solid #34d399;
  color: #065f46;
}

#flash_error,
div.flash.error {
  background: var(--priority-urgent-bg, #fef2f2);
  border: 1px solid #f87171;
  color: #991b1b;
}

#flash_warning,
div.flash.warning {
  background: var(--priority-high-bg, #fffbeb);
  border: 1px solid #fbbf24;
  color: #92400e;
}

#flash_notice a,
div.flash.notice a {
  color: #065f46;
  text-decoration: underline;
}

#flash_error a,
div.flash.error a {
  color: #991b1b;
  text-decoration: underline;
}

#flash_warning a,
div.flash.warning a {
  color: #92400e;
  text-decoration: underline;
}

div.flash span.icon {
  margin-right: 6px;
}


/* ==========================================================================
   3. LOGIN PAGE
   ========================================================================== */

/* Card styling for login form only - no body/layout changes */
#login-form {
  max-width: 380px;
  margin: 40px auto;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 32px 28px;
  box-shadow: var(--shadow-md);
}

#login-form h2 {
  font-size: 20px;
  font-weight: 700;
  text-align: center;
  color: var(--text-primary);
  margin-bottom: 24px;
  letter-spacing: -0.02em;
}

#login-form label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
  display: block;
  margin-bottom: 4px;
}

#login-form input[type="text"],
#login-form input[type="password"] {
  width: 100%;
  margin-bottom: 16px;
  font-family: var(--font-family);
  font-size: 13px;
  padding: 8px 10px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  box-sizing: border-box;
}

#login-form input[type="text"]:focus,
#login-form input[type="password"]:focus {
  border-color: var(--bg-accent);
  box-shadow: 0 0 0 3px var(--bg-accent-subtle);
  outline: none;
}

#login-form input[type="submit"] {
  width: 100%;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  font-family: var(--font-family);
  background: var(--bg-accent);
  color: #ffffff;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background 0.15s ease, box-shadow 0.15s ease;
  margin-top: 4px;
}

#login-form input[type="submit"]:hover {
  background: var(--bg-accent-hover);
  box-shadow: var(--shadow-sm);
}

#login-form input[type="submit"]:active {
  transform: translateY(0.5px);
}

#login-form a {
  color: var(--bg-accent);
  text-decoration: none;
  font-size: 13px;
}

#login-form a:hover {
  text-decoration: underline;
}

#login-form input[type="checkbox"] {
  accent-color: var(--bg-accent);
}

#login-form .tabular p {
  margin-bottom: 12px;
}

/* Lost password / register form */
#lost_password_form,
#register-form {
  max-width: 420px;
  margin: 40px auto;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 32px 28px;
  box-shadow: var(--shadow-md);
}


/* ==========================================================================
   4. ADMIN PAGES
   ========================================================================== */

#admin-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#admin-menu a {
  color: var(--text-secondary);
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  transition: background 0.15s ease, color 0.15s ease;
  text-decoration: none;
  display: block;
  padding: 6px 10px;
}

#admin-menu a:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

#admin-menu a.selected {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
  font-weight: 600;
}

/* Admin tables */
#admin-index table,
.controller-admin table.list {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
}

/* Settings tabs */
.tabs {
  border-bottom: 1px solid var(--border-primary);
  margin-bottom: 16px;
  padding: 0;
  list-style: none;
  display: flex;
  gap: 0;
}

.tabs li {
  list-style: none;
  margin: 0;
  padding: 0;
}

.tabs a,
.tabs ul li a {
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  text-decoration: none;
  padding: 8px 14px;
  display: inline-block;
  border-bottom: 2px solid transparent;
  transition: color 0.15s ease, border-color 0.15s ease;
  margin-bottom: -1px;
}

.tabs a:hover,
.tabs ul li a:hover {
  color: var(--text-primary);
  border-bottom-color: var(--border-primary);
}

.tabs a.selected,
.tabs ul li a.selected {
  color: var(--bg-accent);
  font-weight: 600;
  border-bottom-color: var(--bg-accent);
}

/* Fieldsets */
fieldset {
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 16px 20px;
  margin: 0 0 16px 0;
}

fieldset legend {
  font-weight: 600;
  font-size: 13px;
  color: var(--text-primary);
  padding: 0 6px;
}

fieldset.collapsible legend {
  cursor: pointer;
}

/* Box */
.box {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 14px 16px;
  margin-bottom: 16px;
}

/* Settings info blocks */
#admin-index .splitcontent {
  font-size: 13px;
}


/* ==========================================================================
   5. MY PAGE
   ========================================================================== */

.mypage-box {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: 16px;
}

.mypage-box .handle {
  background: var(--bg-secondary);
  padding: 8px 12px;
  font-weight: 600;
  font-size: 12px;
  cursor: move;
  border-bottom: 1px solid var(--border-primary);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.mypage-box .handle a {
  color: var(--text-secondary);
  text-decoration: none;
}

.mypage-box .handle a:hover {
  color: var(--text-primary);
}

.mypage-box table.list {
  border: none;
  border-radius: 0;
}

.mypage-box .handle .close-icon {
  opacity: 0;
  transition: opacity 0.15s ease;
}

.mypage-box:hover .handle .close-icon {
  opacity: 1;
}

#block-select {
  font-family: var(--font-family);
  font-size: 13px;
  padding: 6px 10px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
}

#block-select:focus {
  border-color: var(--bg-accent);
  box-shadow: 0 0 0 3px var(--bg-accent-subtle);
  outline: none;
}

/* Block container drop zone */
#block-container .sort-handle {
  cursor: move;
}

.mypage-box .wiki {
  padding: 8px 12px;
}


/* ==========================================================================
   6. GANTT CHART
   ========================================================================== */

.gantt_hdr {
  background: var(--bg-secondary);
  font-size: 11px;
  color: var(--text-secondary);
  padding: 4px 6px;
  border-bottom: 1px solid var(--border-primary);
  font-weight: 600;
  text-align: center;
  white-space: nowrap;
}

.gantt_hdr.nwday {
  background: var(--bg-tertiary);
  color: var(--text-tertiary);
}

.gantt_subjects {
  background: var(--bg-primary);
}

.gantt_subjects a {
  color: var(--text-primary);
  text-decoration: none;
  font-size: 12px;
}

.gantt_subjects a:hover {
  color: var(--bg-accent);
}

.gantt_selected_column {
  background: var(--bg-accent-subtle);
}

/* Task bars */
.task_todo {
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  height: 8px;
}

.task_done {
  background: var(--bg-accent);
  border-radius: var(--radius-sm);
  height: 8px;
}

.task_late {
  background: var(--priority-high);
  border-radius: var(--radius-sm);
  height: 8px;
}

.milestone_todo,
.milestone_done,
.milestone_late {
  background: var(--text-secondary);
}

/* Version bars */
.version-behind-schedule .task_late {
  background: var(--priority-high);
}

.version-behind-schedule .task_done {
  background: var(--bg-accent);
}

/* Today marker */
.gantt_today_line {
  border-left: 2px solid var(--bg-accent);
}

/* Gantt subject columns */
td.gantt_subjects_column {
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Gantt hover */
.gantt_subjects tr:hover {
  background: var(--bg-tertiary);
}


/* ==========================================================================
   7. CALENDAR
   ========================================================================== */

table.cal {
  border-collapse: collapse;
  width: 100%;
}

table.cal th {
  background: var(--bg-secondary);
  padding: 8px 10px;
  font-size: 12px;
  color: var(--text-secondary);
  font-weight: 600;
  border: 1px solid var(--border-primary);
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

table.cal td {
  padding: 6px 8px;
  border: 1px solid var(--border-primary);
  vertical-align: top;
  height: 80px;
  font-size: 12px;
  background: var(--bg-primary);
  transition: background 0.15s ease;
}

table.cal td:hover {
  background: var(--bg-tertiary);
}

table.cal td.today {
  background: var(--bg-accent-subtle);
}

table.cal td.today:hover {
  background: var(--bg-accent-subtle);
}

table.cal td.nwday {
  background: var(--bg-tertiary);
  color: var(--text-tertiary);
}

table.cal td p.day-num {
  font-weight: 700;
  font-size: 13px;
  color: var(--text-primary);
  text-align: right;
  margin: 0 0 4px 0;
}

table.cal td.today p.day-num {
  color: var(--bg-accent);
}

table.cal td.nwday p.day-num {
  color: var(--text-tertiary);
  font-weight: 500;
}

table.cal td a {
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 11px;
  display: block;
  padding: 1px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

table.cal td a:hover {
  color: var(--bg-accent);
}

table.cal td a.icon-issue {
  font-size: 11px;
}

/* Calendar navigation */
table.cal caption {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  padding-bottom: 8px;
}


/* ==========================================================================
   8. FORUMS / BOARDS
   ========================================================================== */

table.boards td.name a {
  font-weight: 600;
  color: var(--text-primary);
  text-decoration: none;
  font-size: 13px;
}

table.boards td.name a:hover {
  color: var(--bg-accent);
}

table.boards td.name .description {
  color: var(--text-tertiary);
  font-size: 12px;
  margin-top: 2px;
}

table.boards td {
  font-size: 13px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-secondary);
  color: var(--text-secondary);
}

/* Message/topic styling */
div.message {
  padding: 12px 0;
}

div.message .author {
  color: var(--text-tertiary);
  font-size: 12px;
  margin-bottom: 6px;
}

div.message .wiki {
  font-size: 13px;
}

div.message.reply {
  margin-left: 24px;
  padding-left: 12px;
  border-left: 2px solid var(--border-primary);
}

#message_sticky,
#message_locked {
  accent-color: var(--bg-accent);
}

h2.forum-title {
  font-size: 18px;
  font-weight: 700;
}


/* ==========================================================================
   9. FILES PAGE
   ========================================================================== */

.attachments {
  font-size: 13px;
  color: var(--text-secondary);
}

.attachments a {
  color: var(--bg-accent);
  text-decoration: none;
  transition: color 0.15s ease;
}

.attachments a:hover {
  color: var(--bg-accent-hover);
  text-decoration: underline;
}

.attachments .size {
  color: var(--text-tertiary);
  font-size: 12px;
}

.attachments .author {
  color: var(--text-tertiary);
  font-size: 12px;
}

.attachments span.icon {
  margin-right: 4px;
}

/* File upload drop zone */
.fileover {
  background: var(--bg-accent-subtle);
  border: 2px dashed var(--bg-accent);
  border-radius: var(--radius-md);
}

/* File input area */
span.add_attachment {
  font-size: 12px;
  color: var(--text-tertiary);
}

span.add_attachment input {
  font-size: 12px;
}

.attachments_fields input[type="text"] {
  font-family: var(--font-family);
  font-size: 12px;
}

/* File container */
.file_container {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: 16px;
}

.file_container th {
  background: var(--bg-secondary);
  font-weight: 600;
  font-size: 12px;
  color: var(--text-secondary);
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-primary);
  text-align: left;
}

.file_container td {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-secondary);
  font-size: 13px;
}


/* ==========================================================================
   10. ROADMAP / VERSIONS
   ========================================================================== */

.roadmap .wiki {
  margin-top: 8px;
}

.version-overview {
  margin-bottom: 24px;
}

h3.version {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 8px;
}

h3.version a {
  color: var(--text-primary);
  text-decoration: none;
}

h3.version a:hover {
  color: var(--bg-accent);
}

/* Progress info */
.roadmap .progress-info {
  font-size: 12px;
  color: var(--text-tertiary);
  margin-top: 4px;
}

.roadmap table.progress td {
  height: 10px;
}

/* Version details */
.version-details {
  font-size: 13px;
  color: var(--text-secondary);
}

.version-details .label {
  font-weight: 600;
  color: var(--text-primary);
}

/* Issue list on roadmap */
.roadmap .related-issues {
  margin-top: 12px;
}

.roadmap .related-issues li {
  padding: 2px 0;
  font-size: 13px;
}


/* ==========================================================================
   11. TIME TRACKING
   ========================================================================== */

table.time-entries td {
  font-size: 13px;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-secondary);
}

table.time-entries td.hours {
  text-align: right;
  font-weight: 700;
  color: var(--text-primary);
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

table.time-entries td.subject {
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

table.time-entries td.activity {
  color: var(--text-secondary);
}

table.time-entries td.user {
  color: var(--text-secondary);
}

/* Total hours */
.total-hours {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 12px 0;
}

.total-hours .value {
  color: var(--bg-accent);
}

/* Query totals */
.query-totals {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 8px 0;
}

.query-totals .value {
  font-weight: 600;
  color: var(--text-primary);
}

/* Time entry form */
#time-entry-form .tabular label {
  font-weight: 500;
}

#time_entry_hours {
  font-variant-numeric: tabular-nums;
}

/* Report tables */
.time-report table {
  width: 100%;
}

.time-report table td.hours {
  text-align: right;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

.time-report table td.total {
  font-weight: 700;
  background: var(--bg-secondary);
}


/* ==========================================================================
   12. NEWS
   ========================================================================== */

.news {
  margin-bottom: 16px;
}

.news article {
  margin: 0 0 20px 0;
  padding: 0 0 16px 0;
  border-bottom: 1px solid var(--border-secondary);
}

.news article:last-child {
  border-bottom: none;
}

.news h3 {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 4px 0;
  line-height: 1.4;
}

.news h3 a {
  color: var(--text-primary);
  text-decoration: none;
}

.news h3 a:hover {
  color: var(--bg-accent);
}

.news .author {
  font-size: 12px;
  color: var(--text-tertiary);
  margin-bottom: 8px;
}

.news .wiki {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* Single news article */
.controller-news .wiki {
  margin-top: 8px;
}

/* News summary on overview */
#news-summary h3 {
  font-size: 14px;
}


/* ==========================================================================
   13. REPOSITORY / SOURCE BROWSER
   ========================================================================== */

/* File content / source view */
table.filecontent {
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.55;
  border-collapse: collapse;
  width: 100%;
}

table.filecontent th {
  background: var(--bg-secondary);
  font-weight: 600;
  padding: 6px 10px;
  text-align: left;
  border-bottom: 1px solid var(--border-primary);
  color: var(--text-secondary);
  font-size: 12px;
}

table.filecontent th.line-num,
table.filecontent td.line-num {
  color: var(--text-tertiary);
  text-align: right;
  padding: 1px 10px 1px 6px;
  user-select: none;
  white-space: nowrap;
  min-width: 3em;
  border-right: 1px solid var(--border-secondary);
  background: var(--bg-secondary);
  vertical-align: top;
}

table.filecontent td.line-num a {
  color: var(--text-tertiary);
  text-decoration: none;
}

table.filecontent td.line-num a:hover {
  color: var(--bg-accent);
}

table.filecontent td.line-code {
  padding: 1px 10px;
  white-space: pre;
  color: var(--text-primary);
}

table.filecontent td.line-code pre {
  margin: 0;
  padding: 0;
  background: none;
  border: none;
  font-size: inherit;
  font-family: inherit;
  color: inherit;
  white-space: pre;
}

/* Repository browser */
table.browser {
  width: 100%;
}

table.browser td.filename {
  font-size: 13px;
}

table.browser td.filename a {
  color: var(--text-primary);
  text-decoration: none;
}

table.browser td.filename a:hover {
  color: var(--bg-accent);
}

table.browser td.size {
  text-align: right;
  font-size: 12px;
  color: var(--text-tertiary);
  font-variant-numeric: tabular-nums;
}

table.browser td.age {
  font-size: 12px;
  color: var(--text-tertiary);
  white-space: nowrap;
}

table.browser td.author {
  font-size: 12px;
  color: var(--text-secondary);
}

/* Changeset entries */
.changeset {
  padding: 12px 0;
  border-bottom: 1px solid var(--border-secondary);
}

.changeset .author {
  font-size: 12px;
  color: var(--text-tertiary);
}

.changeset .wiki {
  font-size: 13px;
  margin-top: 6px;
}

.changeset .change {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text-secondary);
}

/* Revision info box */
.revision-info {
  background: var(--bg-secondary);
  padding: 12px 16px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-primary);
  margin-bottom: 16px;
  font-size: 13px;
}

.revision-info .author {
  color: var(--text-secondary);
  font-size: 12px;
}

/* Diff views */
table.diff {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-mono);
  font-size: 12px;
}

table.diff td {
  padding: 1px 8px;
  white-space: pre-wrap;
  word-break: break-all;
  vertical-align: top;
}

table.diff td.line_from {
  background: #fef2f2;
  color: #991b1b;
}

table.diff td.line_to {
  background: #f0fdf4;
  color: #166534;
}

table.diff td span.diff_in {
  background: #bbf7d0;
}

table.diff td span.diff_out {
  background: #fecaca;
}

/* Inline diff */
.text-diff {
  font-family: var(--font-mono);
  font-size: 12px;
}

.text-diff ins {
  background: #bbf7d0;
  text-decoration: none;
  color: #166534;
}

.text-diff del {
  background: #fecaca;
  text-decoration: line-through;
  color: #991b1b;
}

/* Diff side-by-side */
td.diff_in {
  background: #f0fdf4;
}

td.diff_out {
  background: #fef2f2;
}

/* Change types */
.change.change-A {
  color: #16a34a;
}

.change.change-M {
  color: #ca8a04;
}

.change.change-D {
  color: #dc2626;
}

/* Annotate view */
table.annotate td.line-num {
  background: var(--bg-secondary);
}

table.annotate td.revision {
  font-size: 11px;
  color: var(--text-tertiary);
  white-space: nowrap;
  padding: 1px 8px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-secondary);
}

table.annotate td.author {
  font-size: 11px;
  color: var(--text-tertiary);
  white-space: nowrap;
  padding: 1px 8px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-secondary);
}

/* Repository entry icon styles */
.icon-folder {
  color: var(--bg-accent);
}

.icon-file {
  color: var(--text-tertiary);
}


/* ==========================================================================
   14. TOOLTIPS
   ========================================================================== */

.tooltip {
  position: relative;
  cursor: help;
}

.tooltip .tip {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: 10px 12px;
  font-size: 12px;
  color: var(--text-primary);
  line-height: 1.5;
  max-width: 320px;
  z-index: 1000;
}

.tooltip .tip table {
  font-size: 12px;
}

.tooltip .tip table td {
  padding: 2px 6px;
}

/* Standalone tip / info boxes */
.tip-box,
p.tip,
div.tip {
  background: var(--bg-secondary);
  padding: 10px 14px;
  border-radius: var(--radius-md);
  border-left: 3px solid var(--bg-accent);
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 12px;
  line-height: 1.5;
}

/* Warning box */
p.warning,
div.warning {
  background: var(--priority-high-bg, #fffbeb);
  padding: 10px 14px;
  border-radius: var(--radius-md);
  border-left: 3px solid #f59e0b;
  font-size: 13px;
  color: #92400e;
  margin-bottom: 12px;
  line-height: 1.5;
}

/* Nodata info */
p.nodata,
.nodata {
  color: var(--text-tertiary);
  font-size: 13px;
  text-align: center;
  padding: 24px 16px;
  font-style: italic;
}


/* ==========================================================================
   15. SEARCH PAGE
   ========================================================================== */

#search-form input[type="text"] {
  font-size: 14px;
  padding: 8px 12px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-family);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  min-width: 300px;
}

#search-form input[type="text"]:focus {
  border-color: var(--bg-accent);
  box-shadow: 0 0 0 3px var(--bg-accent-subtle);
  outline: none;
}

#search-form input[type="submit"] {
  font-family: var(--font-family);
}

#search-results {
  list-style: none;
  padding: 0;
  margin: 0;
}

#search-results li {
  padding: 12px 0;
  border-bottom: 1px solid var(--border-secondary);
}

#search-results li:last-child {
  border-bottom: none;
}

#search-results dt {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 2px;
}

#search-results dt a {
  color: var(--text-primary);
  text-decoration: none;
}

#search-results dt a:hover {
  color: var(--bg-accent);
}

#search-results dd {
  font-size: 12px;
  color: var(--text-tertiary);
  margin-left: 0;
}

#search-results dd span.description {
  color: var(--text-secondary);
  font-size: 13px;
  display: block;
  margin-top: 2px;
}

#search-results span.highlight {
  background: #fef9c3;
  padding: 1px 3px;
  border-radius: 2px;
  color: #854d0e;
}

/* Search type checkboxes */
#search-form fieldset {
  border: none;
  padding: 8px 0;
}

#search-form label {
  font-size: 13px;
  color: var(--text-secondary);
  margin-right: 12px;
}

#search-form input[type="checkbox"] {
  accent-color: var(--bg-accent);
}


/* ==========================================================================
   16. MISCELLANEOUS
   ========================================================================== */

/* --- Pagination (ul.pages variant) --- */
ul.pages {
  list-style: none;
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 0;
  margin: 16px 0;
  flex-wrap: wrap;
}

ul.pages li {
  list-style: none;
}

ul.pages li a,
ul.pages li span {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  height: 28px;
  padding: 0 6px;
  font-size: 12px;
  font-weight: 500;
  border-radius: var(--radius-sm);
  text-decoration: none;
  transition: background 0.15s ease, color 0.15s ease;
}

ul.pages li a {
  color: var(--text-secondary);
}

ul.pages li a:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

ul.pages li span.current {
  background: var(--bg-accent);
  color: #ffffff;
  font-weight: 600;
}

ul.pages li span.gap {
  color: var(--text-tertiary);
}

/* --- Per-page options --- */
.per-page-options {
  font-size: 12px;
  color: var(--text-tertiary);
}

.per-page-options a {
  color: var(--text-secondary);
  text-decoration: none;
  padding: 2px 4px;
  border-radius: var(--radius-sm);
}

.per-page-options a:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* --- Gravatar --- */
img.gravatar {
  border-radius: 50%;
}

/* --- Other formats links --- */
.other-formats {
  margin: 16px 0;
  font-size: 12px;
}

.other-formats a {
  color: var(--bg-accent);
  text-decoration: none;
  margin-right: 8px;
  padding: 4px 8px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  transition: background 0.15s ease, border-color 0.15s ease;
}

.other-formats a:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-primary);
}

/* --- Watchers --- */
.watchers {
  font-size: 13px;
}

.watchers ul {
  list-style: none;
  padding: 0;
  margin: 4px 0;
}

.watchers li {
  padding: 2px 0;
  font-size: 12px;
  color: var(--text-secondary);
}

.watchers a.user {
  color: var(--text-primary);
  text-decoration: none;
}

.watchers a.user:hover {
  color: var(--bg-accent);
}

.watchers a.delete {
  color: var(--text-tertiary);
  text-decoration: none;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.watchers li:hover a.delete {
  opacity: 1;
}

/* --- Documents --- */
table.documents td.name a {
  font-weight: 600;
  color: var(--text-primary);
  text-decoration: none;
}

table.documents td.name a:hover {
  color: var(--bg-accent);
}

table.documents td {
  font-size: 13px;
  padding: 8px 12px;
}

.controller-documents .wiki {
  font-size: 13px;
  margin-top: 6px;
  color: var(--text-secondary);
}

/* --- Workflow admin tables --- */
table.transitions td {
  text-align: center;
  padding: 4px 6px;
  font-size: 12px;
}

table.transitions th {
  font-size: 12px;
  padding: 4px 8px;
  white-space: nowrap;
  background: var(--bg-secondary);
  font-weight: 600;
}

table.transitions td input[type="checkbox"] {
  accent-color: var(--bg-accent);
}

/* --- Inline editing --- */
.inplace-edit input,
.inplace-edit textarea {
  font-family: var(--font-family);
  font-size: 13px;
  padding: 4px 8px;
  border: 1px solid var(--bg-accent);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  color: var(--text-primary);
  box-shadow: 0 0 0 3px var(--bg-accent-subtle);
}

/* --- Autocomplete dropdown --- */
div.autocomplete {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  max-height: 240px;
  overflow-y: auto;
  z-index: 1000;
}

div.autocomplete ul {
  list-style: none;
  padding: 4px 0;
  margin: 0;
}

div.autocomplete ul li {
  padding: 6px 10px;
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.1s ease;
}

div.autocomplete ul li.selected,
div.autocomplete ul li:hover {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
}

/* --- Error explanation --- */
#errorExplanation,
.errorExplanation {
  background: #fef2f2;
  border: 1px solid #f87171;
  border-radius: var(--radius-md);
  padding: 12px 16px;
  margin-bottom: 16px;
  color: #991b1b;
}

#errorExplanation h2,
.errorExplanation h2 {
  font-size: 14px;
  font-weight: 600;
  margin: 0 0 8px 0;
  color: #991b1b;
}

#errorExplanation ul,
.errorExplanation ul {
  margin: 0;
  padding-left: 1.25em;
}

#errorExplanation li,
.errorExplanation li {
  font-size: 13px;
  margin-bottom: 2px;
}

/* --- Ajax indicator --- */
#ajax-indicator {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: 8px 16px;
  font-size: 13px;
  color: var(--text-secondary);
}

#ajax-indicator span {
  vertical-align: middle;
  margin-left: 6px;
}

/* --- Collapsible fieldsets --- */
fieldset.collapsed {
  border-color: var(--border-secondary);
}

fieldset.collapsed legend {
  color: var(--text-tertiary);
}

fieldset.collapsible legend:before {
  content: "";
  display: inline-block;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 4px 0 4px 6px;
  border-color: transparent transparent transparent var(--text-tertiary);
  margin-right: 6px;
  transition: transform 0.15s ease;
  vertical-align: middle;
}

fieldset.collapsible:not(.collapsed) legend:before {
  transform: rotate(90deg);
}

/* --- Optgroup styling --- */
select optgroup {
  font-weight: 600;
  font-style: normal;
  color: var(--text-primary);
  font-size: 13px;
}

select optgroup option {
  font-weight: 400;
  padding-left: 8px;
}

/* --- Sortable table columns --- */
th.sort a {
  color: var(--text-secondary);
  text-decoration: none;
  white-space: nowrap;
}

th.sort.asc a:after {
  content: " \2191";
  font-size: 11px;
  color: var(--bg-accent);
}

th.sort.desc a:after {
  content: " \2193";
  font-size: 11px;
  color: var(--bg-accent);
}

th.sort:hover a {
  color: var(--text-primary);
}

th.sort.asc a,
th.sort.desc a {
  color: var(--bg-accent);
  font-weight: 600;
}

/* --- Overview page content area styling --- */
.splitcontentleft,
.splitcontentright {
  font-size: 13px;
}

.splitcontentleft h3,
.splitcontentright h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
}

/* Overview box */
.overview .box {
  margin-bottom: 12px;
}

/* --- Members list --- */
.members a {
  color: var(--text-primary);
  text-decoration: none;
}

.members a:hover {
  color: var(--bg-accent);
}

/* --- Issue totals / query totals --- */
.issue-count,
span.issue-count {
  font-weight: 600;
  font-size: 13px;
}

/* --- Context menu (right-click) --- */
#context-menu {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: 4px 0;
  min-width: 180px;
  z-index: 9999;
}

#context-menu li {
  list-style: none;
}

#context-menu a {
  display: block;
  padding: 6px 12px;
  font-size: 13px;
  color: var(--text-primary);
  text-decoration: none;
  transition: background 0.1s ease;
}

#context-menu a:hover {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
}

#context-menu li.folder > a {
  font-weight: 600;
}

#context-menu li.folder ul {
  padding: 0;
  margin: 0;
}

#context-menu hr {
  border: none;
  height: 1px;
  background: var(--border-secondary);
  margin: 4px 0;
}

#context-menu a.disabled {
  color: var(--text-tertiary);
  cursor: default;
}

#context-menu a.disabled:hover {
  background: none;
  color: var(--text-tertiary);
}

/* --- Active / Icon indicators --- */
a.icon:before {
  margin-right: 4px;
  opacity: 0.7;
}

/* --- Text formatting toolbar --- */
.jstEditor .jstElements {
  border-bottom: 1px solid var(--border-primary);
  padding: 4px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.jstEditor .jstElements button {
  background: none;
  border: none;
  padding: 4px 6px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.15s ease, background 0.15s ease;
}

.jstEditor .jstElements button:hover {
  opacity: 1;
  background: var(--bg-tertiary);
}

/* --- Preview area --- */
#preview {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 12px 16px;
  margin-top: 8px;
  min-height: 80px;
}

#preview fieldset {
  border: none;
  padding: 0;
}

/* --- Loading / progress bars --- */
.progress {
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  overflow: hidden;
  height: 10px;
}

.progress .bar {
  height: 100%;
  border-radius: var(--radius-sm);
  transition: width 0.3s ease;
}

.progress .closed {
  background: var(--bg-accent);
}

.progress .done {
  background: #34d399;
}

.progress .open {
  background: var(--bg-tertiary);
}

/* --- Badge-like counters --- */
span.badge {
  background: var(--bg-accent);
  color: #ffffff;
  font-size: 11px;
  font-weight: 600;
  padding: 1px 6px;
  border-radius: 10px;
  margin-left: 4px;
  vertical-align: middle;
}

/* --- Sidebar blocks consistent styling --- */
#sidebar h3 {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-tertiary);
  margin: 16px 0 6px 0;
}

#sidebar h3:first-child {
  margin-top: 0;
}

#sidebar a {
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 13px;
}

#sidebar a:hover {
  color: var(--bg-accent);
}

#sidebar ul {
  list-style: none;
  padding: 0;
  margin: 0 0 12px 0;
}

#sidebar ul li {
  padding: 2px 0;
}

/* --- Quick search in header --- */
#quick-search input[type="text"] {
  font-family: var(--font-family);
  font-size: 12px;
  padding: 4px 8px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: border-color 0.15s ease, box-shadow 0.15s ease, width 0.2s ease;
}

#quick-search input[type="text"]:focus {
  border-color: var(--bg-accent);
  box-shadow: 0 0 0 2px var(--bg-accent-subtle);
  outline: none;
}

/* --- No result message --- */
.no-data,
p.no-data {
  text-align: center;
  color: var(--text-tertiary);
  font-size: 13px;
  padding: 32px 16px;
}

/* --- Breadcrumb-like navigation --- */
p.breadcrumb {
  font-size: 12px;
  color: var(--text-tertiary);
}

p.breadcrumb a {
  color: var(--text-secondary);
  text-decoration: none;
}

p.breadcrumb a:hover {
  color: var(--bg-accent);
}

p.breadcrumb span.separator {
  margin: 0 4px;
  color: var(--text-tertiary);
}

/* --- Legend / Key for chart colors --- */
.legend {
  font-size: 12px;
  color: var(--text-secondary);
}

.legend li {
  list-style: none;
  padding: 2px 0;
}

.legend span.color-box {
  display: inline-block;
  width: 12px;
  height: 12px;
  border-radius: 2px;
  margin-right: 6px;
  vertical-align: middle;
}

/* --- Token / tag input styling --- */
.token-input-list {
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 4px;
  background: var(--bg-primary);
  min-height: 34px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: center;
}

.token-input-list li {
  list-style: none;
}

.token-input-token {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
  border-radius: var(--radius-sm);
  padding: 2px 8px;
  font-size: 12px;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.token-input-token span.token-input-delete-token {
  cursor: pointer;
  font-weight: 700;
  opacity: 0.6;
  transition: opacity 0.15s ease;
}

.token-input-token span.token-input-delete-token:hover {
  opacity: 1;
}

.token-input-input-token input {
  border: none;
  outline: none;
  background: none;
  font-family: var(--font-family);
  font-size: 13px;
  color: var(--text-primary);
  padding: 4px;
}

/* Token dropdown */
.token-input-dropdown {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 1000;
}

.token-input-dropdown ul {
  list-style: none;
  padding: 4px 0;
  margin: 0;
}

.token-input-dropdown li {
  padding: 6px 10px;
  font-size: 13px;
  cursor: pointer;
}

.token-input-dropdown li.selected,
.token-input-dropdown li:hover {
  background: var(--bg-accent-subtle);
  color: var(--bg-accent);
}

.token-input-dropdown p {
  font-size: 12px;
  color: var(--text-tertiary);
  padding: 6px 10px;
  margin: 0;
}

/* --- Image thumbnails --- */
a.thumbnail {
  display: inline-block;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  padding: 2px;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

a.thumbnail:hover {
  border-color: var(--bg-accent);
  box-shadow: var(--shadow-sm);
}

a.thumbnail img {
  display: block;
  border-radius: 2px;
}

/* --- Lightbox overlay --- */
.ui-widget-overlay {
  background: rgba(0, 0, 0, 0.6);
}

/* --- Table of permissions --- */
table.permissions td {
  text-align: center;
  padding: 4px 6px;
  font-size: 12px;
}

table.permissions th {
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  padding: 4px 8px;
  background: var(--bg-secondary);
}

table.permissions input[type="checkbox"] {
  accent-color: var(--bg-accent);
}

/* --- Project list --- */
.projects.box {
  padding: 0;
}

ul.projects li.root {
  padding: 10px 14px;
  border-bottom: 1px solid var(--border-secondary);
}

ul.projects li.root:last-child {
  border-bottom: none;
}

ul.projects a.project {
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
  text-decoration: none;
}

ul.projects a.project:hover {
  color: var(--bg-accent);
}

ul.projects .wiki {
  font-size: 12px;
  color: var(--text-tertiary);
  margin-top: 4px;
}

ul.projects li.child {
  padding-left: 20px;
}

/* --- Print styles --- */
@media print {
  #header,
  #top-menu,
  #main-menu,
  #sidebar,
  #footer,
  .contextual,
  .other-formats,
  #quick-search,
  .pagination,
  .tabs {
    display: none;
  }

  body {
    background: #ffffff;
    color: #000000;
    font-size: 11pt;
  }

  #content {
    margin: 0;
    padding: 0;
    border: none;
    box-shadow: none;
  }

  #main {
    background: #ffffff;
  }

  #wrapper {
    max-width: 100%;
  }

  a {
    color: #000000;
    text-decoration: underline;
  }

  table {
    border-collapse: collapse;
  }

  table th,
  table td {
    border: 1px solid #cccccc;
    padding: 4px 6px;
  }

  table th {
    background: #f0f0f0;
    font-weight: 600;
  }

  .progress {
    border: 1px solid #cccccc;
  }

  .progress .closed {
    background: #666666;
  }

  pre, code {
    background: #f5f5f5;
    border: 1px solid #dddddd;
    font-size: 9pt;
  }

  img.gravatar {
    display: none;
  }

  h1, h2, h3 {
    page-break-after: avoid;
  }

  table, pre {
    page-break-inside: avoid;
  }
}

/* === END PART 3 === */

/* ==========================================================================
   WS Redmine Theme — Part 4: Dark Mode, Context Menus, Modals, Dropdowns,
   Autocomplete, Responsive, Animations, Accessibility, Scrollbars
   Linear.app-inspired design
   ========================================================================== */

/* ==========================================================================
   SECTION 1: DARK MODE VARIABLES — Auto-detect via prefers-color-scheme
   ========================================================================== */

@media (prefers-color-scheme: dark) {
  :root {
    /* Background colors */
    --bg-primary: #1C1C1E;
    --bg-secondary: #151517;
    --bg-tertiary: #242428;
    --bg-accent: #5E6AD2;
    --bg-accent-hover: #6E7AE2;
    --bg-accent-subtle: #252640;

    /* Text colors */
    --text-primary: #EDEDEF;
    --text-secondary: #8A8F98;
    --text-tertiary: #5A5E66;
    --text-on-accent: #FFFFFF;

    /* Borders */
    --border-primary: #2E2E32;
    --border-secondary: #232326;
    --border-focus: #5E6AD2;

    /* Shadows — stronger for dark backgrounds */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.4);

    /* Priority colors — adjusted for dark backgrounds */
    --priority-normal: #8A8F98;
    --priority-low: #5A5E66;
  }
}

/* ==========================================================================
   SECTION 2: MANUAL DARK MODE — body.theme-ws-dark class toggle
   ========================================================================== */

body.theme-ws-dark {
  /* Background colors */
  --bg-primary: #1C1C1E;
  --bg-secondary: #151517;
  --bg-tertiary: #242428;
  --bg-accent: #5E6AD2;
  --bg-accent-hover: #6E7AE2;
  --bg-accent-subtle: #252640;

  /* Text colors */
  --text-primary: #EDEDEF;
  --text-secondary: #8A8F98;
  --text-tertiary: #5A5E66;
  --text-on-accent: #FFFFFF;

  /* Borders */
  --border-primary: #2E2E32;
  --border-secondary: #232326;
  --border-focus: #5E6AD2;

  /* Shadows — stronger for dark backgrounds */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.4);

  /* Priority colors — adjusted for dark backgrounds */
  --priority-normal: #8A8F98;
  --priority-low: #5A5E66;
}

/* ==========================================================================
   SECTION 3: DARK MODE COMPONENT OVERRIDES
   Applies to both @media (prefers-color-scheme: dark) and body.theme-ws-dark
   We use a mixin approach: duplicate selectors for both triggers
   ========================================================================== */

/* ---------- Flash Messages ---------- */
@media (prefers-color-scheme: dark) {
  #flash_notice {
    background-color: #1a2e1a;
    color: #6fdc6f;
    border-color: #2a4a2a;
  }
  #flash_error {
    background-color: #2e1a1a;
    color: #f08080;
    border-color: #4a2a2a;
  }
  #flash_warning {
    background-color: #2e2a1a;
    color: #e0c060;
    border-color: #4a3a2a;
  }
}

body.theme-ws-dark #flash_notice {
  background-color: #1a2e1a;
  color: #6fdc6f;
  border-color: #2a4a2a;
}
body.theme-ws-dark #flash_error {
  background-color: #2e1a1a;
  color: #f08080;
  border-color: #4a2a2a;
}
body.theme-ws-dark #flash_warning {
  background-color: #2e2a1a;
  color: #e0c060;
  border-color: #4a3a2a;
}

/* ---------- Login Form ---------- */
@media (prefers-color-scheme: dark) {
  #login-form input[type="text"],
  #login-form input[type="password"] {
    background-color: #242428;
    color: #EDEDEF;
    border-color: #2E2E32;
  }
  #login-form input[type="text"]:focus,
  #login-form input[type="password"]:focus {
    border-color: #5E6AD2;
    background-color: #1C1C1E;
  }
  #login-form {
    background-color: #1C1C1E;
    border-color: #2E2E32;
  }
  #login-form label {
    color: #8A8F98;
  }
}

body.theme-ws-dark #login-form input[type="text"],
body.theme-ws-dark #login-form input[type="password"] {
  background-color: #242428;
  color: #EDEDEF;
  border-color: #2E2E32;
}
body.theme-ws-dark #login-form input[type="text"]:focus,
body.theme-ws-dark #login-form input[type="password"]:focus {
  border-color: #5E6AD2;
  background-color: #1C1C1E;
}
body.theme-ws-dark #login-form {
  background-color: #1C1C1E;
  border-color: #2E2E32;
}
body.theme-ws-dark #login-form label {
  color: #8A8F98;
}

/* ---------- Gravatar ---------- */
@media (prefers-color-scheme: dark) {
  img.gravatar {
    border-color: #2E2E32;
  }
}

body.theme-ws-dark img.gravatar {
  border-color: #2E2E32;
}

/* ---------- Select Arrow SVG (light arrow for dark bg) ---------- */
@media (prefers-color-scheme: dark) {
  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath fill='%238A8F98' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E");
    background-color: #242428;
    color: #EDEDEF;
    border-color: #2E2E32;
  }
}

body.theme-ws-dark select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath fill='%238A8F98' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E");
  background-color: #242428;
  color: #EDEDEF;
  border-color: #2E2E32;
}

/* ---------- Code Blocks ---------- */
@media (prefers-color-scheme: dark) {
  pre,
  code,
  .wiki pre,
  .wiki code,
  div.wiki pre,
  div.wiki code {
    background-color: #1a1a1e;
    color: #d4d4d8;
    border-color: #2E2E32;
  }
  pre .line-num {
    color: #5A5E66;
    border-color: #2E2E32;
  }
  /* Syntax highlighting in code blocks */
  .syntaxhl .normal { color: #d4d4d8; }
  .syntaxhl .comment { color: #6a9955; }
  .syntaxhl .string { color: #ce9178; }
  .syntaxhl .keyword { color: #569cd6; }
  .syntaxhl .number { color: #b5cea8; }
  .syntaxhl .symbol { color: #d7ba7d; }
  .syntaxhl .class { color: #4ec9b0; }
  .syntaxhl .attribute { color: #9cdcfe; }
  .syntaxhl .builtin { color: #dcdcaa; }
  .syntaxhl .char { color: #d16969; }
  .syntaxhl .constant { color: #4fc1ff; }
  .syntaxhl .function { color: #dcdcaa; }
  .syntaxhl .operator { color: #d4d4d8; }
  .syntaxhl .preprocessor { color: #c586c0; }
  .syntaxhl .regexp { color: #d16969; }
  .syntaxhl .tag { color: #569cd6; }
  .syntaxhl .type { color: #4ec9b0; }
  .syntaxhl .value { color: #ce9178; }
}

body.theme-ws-dark pre,
body.theme-ws-dark code,
body.theme-ws-dark .wiki pre,
body.theme-ws-dark .wiki code,
body.theme-ws-dark div.wiki pre,
body.theme-ws-dark div.wiki code {
  background-color: #1a1a1e;
  color: #d4d4d8;
  border-color: #2E2E32;
}
body.theme-ws-dark pre .line-num {
  color: #5A5E66;
  border-color: #2E2E32;
}
body.theme-ws-dark .syntaxhl .normal { color: #d4d4d8; }
body.theme-ws-dark .syntaxhl .comment { color: #6a9955; }
body.theme-ws-dark .syntaxhl .string { color: #ce9178; }
body.theme-ws-dark .syntaxhl .keyword { color: #569cd6; }
body.theme-ws-dark .syntaxhl .number { color: #b5cea8; }
body.theme-ws-dark .syntaxhl .symbol { color: #d7ba7d; }
body.theme-ws-dark .syntaxhl .class { color: #4ec9b0; }
body.theme-ws-dark .syntaxhl .attribute { color: #9cdcfe; }
body.theme-ws-dark .syntaxhl .builtin { color: #dcdcaa; }
body.theme-ws-dark .syntaxhl .char { color: #d16969; }
body.theme-ws-dark .syntaxhl .constant { color: #4fc1ff; }
body.theme-ws-dark .syntaxhl .function { color: #dcdcaa; }
body.theme-ws-dark .syntaxhl .operator { color: #d4d4d8; }
body.theme-ws-dark .syntaxhl .preprocessor { color: #c586c0; }
body.theme-ws-dark .syntaxhl .regexp { color: #d16969; }
body.theme-ws-dark .syntaxhl .tag { color: #569cd6; }
body.theme-ws-dark .syntaxhl .type { color: #4ec9b0; }
body.theme-ws-dark .syntaxhl .value { color: #ce9178; }

/* ---------- Calendar ---------- */
@media (prefers-color-scheme: dark) {
  table.cal {
    background-color: #1C1C1E;
    border-color: #2E2E32;
  }
  table.cal th {
    background-color: #242428;
    color: #8A8F98;
    border-color: #2E2E32;
  }
  table.cal td {
    background-color: #1C1C1E;
    border-color: #2E2E32;
    color: #EDEDEF;
  }
  table.cal td.odd {
    background-color: #151517;
  }
  table.cal td.today {
    background-color: #252640;
    border-color: #5E6AD2;
  }
  table.cal td p.day-num {
    color: #8A8F98;
  }
  table.cal td.today p.day-num {
    color: #5E6AD2;
  }
}

body.theme-ws-dark table.cal {
  background-color: #1C1C1E;
  border-color: #2E2E32;
}
body.theme-ws-dark table.cal th {
  background-color: #242428;
  color: #8A8F98;
  border-color: #2E2E32;
}
body.theme-ws-dark table.cal td {
  background-color: #1C1C1E;
  border-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark table.cal td.odd {
  background-color: #151517;
}
body.theme-ws-dark table.cal td.today {
  background-color: #252640;
  border-color: #5E6AD2;
}
body.theme-ws-dark table.cal td p.day-num {
  color: #8A8F98;
}
body.theme-ws-dark table.cal td.today p.day-num {
  color: #5E6AD2;
}

/* ---------- Gantt ---------- */
@media (prefers-color-scheme: dark) {
  .gantt_hdr {
    background-color: #242428;
    color: #8A8F98;
    border-color: #2E2E32;
  }
  .gantt_subjects {
    background-color: #1C1C1E;
    border-color: #2E2E32;
    color: #EDEDEF;
  }
  .gantt_subjects a {
    color: #EDEDEF;
  }
  td.gantt_selected {
    background-color: #252640;
  }
  .task_todo {
    background-color: #3a3a4a;
    border-color: #5E6AD2;
  }
  .task_done {
    background-color: #5E6AD2;
  }
  .task_late {
    background-color: #EF4444;
  }
  .milestone {
    background-color: #F59E0B;
    border-color: #F59E0B;
  }
}

body.theme-ws-dark .gantt_hdr {
  background-color: #242428;
  color: #8A8F98;
  border-color: #2E2E32;
}
body.theme-ws-dark .gantt_subjects {
  background-color: #1C1C1E;
  border-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark .gantt_subjects a {
  color: #EDEDEF;
}
body.theme-ws-dark td.gantt_selected {
  background-color: #252640;
}
body.theme-ws-dark .task_todo {
  background-color: #3a3a4a;
  border-color: #5E6AD2;
}
body.theme-ws-dark .task_done {
  background-color: #5E6AD2;
}
body.theme-ws-dark .task_late {
  background-color: #EF4444;
}
body.theme-ws-dark .milestone {
  background-color: #F59E0B;
  border-color: #F59E0B;
}

/* ---------- Input Autofill ---------- */
@media (prefers-color-scheme: dark) {
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill,
  select:-webkit-autofill {
    -webkit-text-fill-color: #EDEDEF;
    -webkit-box-shadow: 0 0 0px 1000px #242428 inset;
    transition: background-color 5000s ease-in-out 0s;
  }
}

body.theme-ws-dark input:-webkit-autofill,
body.theme-ws-dark input:-webkit-autofill:hover,
body.theme-ws-dark input:-webkit-autofill:focus,
body.theme-ws-dark textarea:-webkit-autofill,
body.theme-ws-dark select:-webkit-autofill {
  -webkit-text-fill-color: #EDEDEF;
  -webkit-box-shadow: 0 0 0px 1000px #242428 inset;
  transition: background-color 5000s ease-in-out 0s;
}

/* ---------- Tables ---------- */
@media (prefers-color-scheme: dark) {
  table.list thead th,
  table.issues thead th {
    background-color: #242428;
    color: #8A8F98;
    border-color: #2E2E32;
  }
  table.list tbody td,
  table.issues tbody td {
    border-color: #2E2E32;
    color: #EDEDEF;
  }
  table.list tbody tr:hover,
  table.issues tbody tr:hover {
    background-color: #242428;
  }
  table.list tbody tr.even,
  table.issues tbody tr.even {
    background-color: #1a1a1e;
  }
  table.list tbody tr.odd,
  table.issues tbody tr.odd {
    background-color: #1C1C1E;
  }
  table.list tbody tr td.priority-highest,
  table.issues tbody tr td.priority-highest {
    color: #EF4444;
  }
  table.list tbody tr td.priority-high,
  table.issues tbody tr td.priority-high {
    color: #F97316;
  }
  table.list tbody tr td.priority-low,
  table.issues tbody tr td.priority-low {
    color: #5A5E66;
  }
  table.list td a {
    color: #EDEDEF;
  }
  table.list td a:hover {
    color: #5E6AD2;
  }
}

body.theme-ws-dark table.list thead th,
body.theme-ws-dark table.issues thead th {
  background-color: #242428;
  color: #8A8F98;
  border-color: #2E2E32;
}
body.theme-ws-dark table.list tbody td,
body.theme-ws-dark table.issues tbody td {
  border-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark table.list tbody tr:hover,
body.theme-ws-dark table.issues tbody tr:hover {
  background-color: #242428;
}
body.theme-ws-dark table.list tbody tr.even,
body.theme-ws-dark table.issues tbody tr.even {
  background-color: #1a1a1e;
}
body.theme-ws-dark table.list tbody tr.odd,
body.theme-ws-dark table.issues tbody tr.odd {
  background-color: #1C1C1E;
}
body.theme-ws-dark table.list tbody tr td.priority-highest,
body.theme-ws-dark table.issues tbody tr td.priority-highest {
  color: #EF4444;
}
body.theme-ws-dark table.list tbody tr td.priority-high,
body.theme-ws-dark table.issues tbody tr td.priority-high {
  color: #F97316;
}
body.theme-ws-dark table.list tbody tr td.priority-low,
body.theme-ws-dark table.issues tbody tr td.priority-low {
  color: #5A5E66;
}
body.theme-ws-dark table.list td a {
  color: #EDEDEF;
}
body.theme-ws-dark table.list td a:hover {
  color: #5E6AD2;
}

/* ---------- Wiki ---------- */
@media (prefers-color-scheme: dark) {
  div.wiki {
    color: #EDEDEF;
  }
  div.wiki h1,
  div.wiki h2,
  div.wiki h3,
  div.wiki h4,
  div.wiki h5,
  div.wiki h6 {
    color: #EDEDEF;
    border-color: #2E2E32;
  }
  div.wiki a {
    color: #7B85E0;
  }
  div.wiki a:hover {
    color: #9BA3F0;
  }
  div.wiki blockquote {
    border-color: #5E6AD2;
    background-color: #242428;
    color: #8A8F98;
  }
  div.wiki table {
    border-color: #2E2E32;
  }
  div.wiki table th {
    background-color: #242428;
    color: #8A8F98;
    border-color: #2E2E32;
  }
  div.wiki table td {
    border-color: #2E2E32;
    color: #EDEDEF;
  }
  div.wiki hr {
    border-color: #2E2E32;
  }
}

body.theme-ws-dark div.wiki {
  color: #EDEDEF;
}
body.theme-ws-dark div.wiki h1,
body.theme-ws-dark div.wiki h2,
body.theme-ws-dark div.wiki h3,
body.theme-ws-dark div.wiki h4,
body.theme-ws-dark div.wiki h5,
body.theme-ws-dark div.wiki h6 {
  color: #EDEDEF;
  border-color: #2E2E32;
}
body.theme-ws-dark div.wiki a {
  color: #7B85E0;
}
body.theme-ws-dark div.wiki a:hover {
  color: #9BA3F0;
}
body.theme-ws-dark div.wiki blockquote {
  border-color: #5E6AD2;
  background-color: #242428;
  color: #8A8F98;
}
body.theme-ws-dark div.wiki table {
  border-color: #2E2E32;
}
body.theme-ws-dark div.wiki table th {
  background-color: #242428;
  color: #8A8F98;
  border-color: #2E2E32;
}
body.theme-ws-dark div.wiki table td {
  border-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark div.wiki hr {
  border-color: #2E2E32;
}

/* ---------- Issue Detail ---------- */
@media (prefers-color-scheme: dark) {
  .issue .subject h3 {
    color: #EDEDEF;
  }
  .issue .details {
    background-color: #1C1C1E;
    border-color: #2E2E32;
  }
  .issue .attributes .attribute .label {
    color: #8A8F98;
  }
  .issue .attributes .attribute .value {
    color: #EDEDEF;
  }
  div.issue div.description {
    color: #EDEDEF;
  }
  #issue-changesets {
    background-color: #242428;
    border-color: #2E2E32;
  }
  div.journal {
    border-color: #2E2E32;
  }
  div.journal .wiki {
    color: #EDEDEF;
  }
  div.journal h4 {
    color: #8A8F98;
  }
  div.journal .details {
    color: #8A8F98;
  }
  div.journal .details .old-value {
    color: #5A5E66;
    text-decoration: line-through;
  }
}

body.theme-ws-dark .issue .subject h3 {
  color: #EDEDEF;
}
body.theme-ws-dark .issue .details {
  background-color: #1C1C1E;
  border-color: #2E2E32;
}
body.theme-ws-dark .issue .attributes .attribute .label {
  color: #8A8F98;
}
body.theme-ws-dark .issue .attributes .attribute .value {
  color: #EDEDEF;
}
body.theme-ws-dark div.issue div.description {
  color: #EDEDEF;
}
body.theme-ws-dark #issue-changesets {
  background-color: #242428;
  border-color: #2E2E32;
}
body.theme-ws-dark div.journal {
  border-color: #2E2E32;
}
body.theme-ws-dark div.journal .wiki {
  color: #EDEDEF;
}
body.theme-ws-dark div.journal h4 {
  color: #8A8F98;
}
body.theme-ws-dark div.journal .details {
  color: #8A8F98;
}
body.theme-ws-dark div.journal .details .old-value {
  color: #5A5E66;
  text-decoration: line-through;
}

/* ---------- My Page Boxes ---------- */
@media (prefers-color-scheme: dark) {
  .mypage-box {
    background-color: #1C1C1E;
    border-color: #2E2E32;
    color: #EDEDEF;
  }
  .mypage-box .handle {
    color: #5A5E66;
  }
  .mypage-box h3 {
    color: #EDEDEF;
    border-color: #2E2E32;
  }
  #block-container {
    background-color: #151517;
  }
}

body.theme-ws-dark .mypage-box {
  background-color: #1C1C1E;
  border-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark .mypage-box .handle {
  color: #5A5E66;
}
body.theme-ws-dark .mypage-box h3 {
  color: #EDEDEF;
  border-color: #2E2E32;
}
body.theme-ws-dark #block-container {
  background-color: #151517;
}

/* ---------- Form Elements ---------- */
@media (prefers-color-scheme: dark) {
  input[type="text"],
  input[type="password"],
  input[type="email"],
  input[type="url"],
  input[type="search"],
  input[type="number"],
  input[type="tel"],
  input[type="date"],
  input[type="datetime-local"],
  input[type="time"],
  textarea {
    background-color: #242428;
    color: #EDEDEF;
    border-color: #2E2E32;
  }
  input[type="text"]:focus,
  input[type="password"]:focus,
  input[type="email"]:focus,
  input[type="url"]:focus,
  input[type="search"]:focus,
  input[type="number"]:focus,
  input[type="tel"]:focus,
  input[type="date"]:focus,
  input[type="datetime-local"]:focus,
  input[type="time"]:focus,
  textarea:focus,
  select:focus {
    border-color: #5E6AD2;
    background-color: #1C1C1E;
    box-shadow: 0 0 0 2px rgba(94, 106, 210, 0.2);
  }
  input::placeholder,
  textarea::placeholder {
    color: #5A5E66;
  }
  .tabular label {
    color: #8A8F98;
  }
  fieldset {
    border-color: #2E2E32;
  }
  fieldset legend {
    color: #EDEDEF;
  }
}

body.theme-ws-dark input[type="text"],
body.theme-ws-dark input[type="password"],
body.theme-ws-dark input[type="email"],
body.theme-ws-dark input[type="url"],
body.theme-ws-dark input[type="search"],
body.theme-ws-dark input[type="number"],
body.theme-ws-dark input[type="tel"],
body.theme-ws-dark input[type="date"],
body.theme-ws-dark input[type="datetime-local"],
body.theme-ws-dark input[type="time"],
body.theme-ws-dark textarea {
  background-color: #242428;
  color: #EDEDEF;
  border-color: #2E2E32;
}
body.theme-ws-dark input[type="text"]:focus,
body.theme-ws-dark input[type="password"]:focus,
body.theme-ws-dark input[type="email"]:focus,
body.theme-ws-dark input[type="url"]:focus,
body.theme-ws-dark input[type="search"]:focus,
body.theme-ws-dark input[type="number"]:focus,
body.theme-ws-dark input[type="tel"]:focus,
body.theme-ws-dark input[type="date"]:focus,
body.theme-ws-dark input[type="datetime-local"]:focus,
body.theme-ws-dark input[type="time"]:focus,
body.theme-ws-dark textarea:focus,
body.theme-ws-dark select:focus {
  border-color: #5E6AD2;
  background-color: #1C1C1E;
  box-shadow: 0 0 0 2px rgba(94, 106, 210, 0.2);
}
body.theme-ws-dark input::placeholder,
body.theme-ws-dark textarea::placeholder {
  color: #5A5E66;
}
body.theme-ws-dark .tabular label {
  color: #8A8F98;
}
body.theme-ws-dark fieldset {
  border-color: #2E2E32;
}
body.theme-ws-dark fieldset legend {
  color: #EDEDEF;
}

/* ---------- Buttons (secondary treatment) ---------- */
@media (prefers-color-scheme: dark) {
  input[type="button"],
  button,
  a.button {
    background-color: #242428;
    color: #EDEDEF;
    border-color: #2E2E32;
  }
  input[type="button"]:hover,
  button:hover,
  a.button:hover {
    background-color: #2E2E32;
    border-color: #3a3a3e;
    color: #EDEDEF;
  }
}

body.theme-ws-dark input[type="button"],
body.theme-ws-dark button,
body.theme-ws-dark a.button {
  background-color: #242428;
  color: #EDEDEF;
  border-color: #2E2E32;
}
body.theme-ws-dark input[type="button"]:hover,
body.theme-ws-dark button:hover,
body.theme-ws-dark a.button:hover {
  background-color: #2E2E32;
  border-color: #3a3a3e;
  color: #EDEDEF;
}

/* ---------- Pagination ---------- */
@media (prefers-color-scheme: dark) {
  p.pagination {
    color: #8A8F98;
  }
  p.pagination a {
    color: #EDEDEF;
    border-color: #2E2E32;
    background-color: #242428;
  }
  p.pagination a:hover {
    background-color: #2E2E32;
    color: #EDEDEF;
  }
  p.pagination span.current {
    background-color: #5E6AD2;
    color: #FFFFFF;
    border-color: #5E6AD2;
  }
  .pagination ul li {
    color: #8A8F98;
  }
}

body.theme-ws-dark p.pagination {
  color: #8A8F98;
}
body.theme-ws-dark p.pagination a {
  color: #EDEDEF;
  border-color: #2E2E32;
  background-color: #242428;
}
body.theme-ws-dark p.pagination a:hover {
  background-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark p.pagination span.current {
  background-color: #5E6AD2;
  color: #FFFFFF;
  border-color: #5E6AD2;
}
body.theme-ws-dark .pagination ul li {
  color: #8A8F98;
}

/* ---------- Tooltips ---------- */
@media (prefers-color-scheme: dark) {
  .tooltip .tip {
    background-color: #2E2E32;
    color: #EDEDEF;
    border-color: #3a3a3e;
  }
}

body.theme-ws-dark .tooltip .tip {
  background-color: #2E2E32;
  color: #EDEDEF;
  border-color: #3a3a3e;
}

/* ---------- Admin Pages ---------- */
@media (prefers-color-scheme: dark) {
  #admin-menu a {
    color: #EDEDEF;
    background-color: #1C1C1E;
    border-color: #2E2E32;
  }
  #admin-menu a:hover,
  #admin-menu a.selected {
    background-color: #252640;
    color: #5E6AD2;
    border-color: #5E6AD2;
  }
  .tabs ul li a {
    color: #8A8F98;
    background-color: transparent;
    border-color: transparent;
  }
  .tabs ul li a:hover {
    color: #EDEDEF;
    background-color: #242428;
  }
  .tabs ul li a.selected {
    color: #5E6AD2;
    border-color: #5E6AD2;
    background-color: transparent;
  }
}

body.theme-ws-dark #admin-menu a {
  color: #EDEDEF;
  background-color: #1C1C1E;
  border-color: #2E2E32;
}
body.theme-ws-dark #admin-menu a:hover,
body.theme-ws-dark #admin-menu a.selected {
  background-color: #252640;
  color: #5E6AD2;
  border-color: #5E6AD2;
}
body.theme-ws-dark .tabs ul li a {
  color: #8A8F98;
  background-color: transparent;
  border-color: transparent;
}
body.theme-ws-dark .tabs ul li a:hover {
  color: #EDEDEF;
  background-color: #242428;
}
body.theme-ws-dark .tabs ul li a.selected {
  color: #5E6AD2;
  border-color: #5E6AD2;
  background-color: transparent;
}

/* ---------- Catch-all: Body, Layout, and Misc Elements ---------- */
@media (prefers-color-scheme: dark) {
  body {
    background-color: #1C1C1E;
    color: #EDEDEF;
  }
  #wrapper {
    background-color: #1C1C1E;
  }
  #header {
    background-color: #151517;
    border-color: #2E2E32;
    color: #EDEDEF;
  }
  #header a {
    color: #EDEDEF;
  }
  #top-menu {
    background-color: #151517;
    border-color: #2E2E32;
    color: #8A8F98;
  }
  #top-menu a {
    color: #8A8F98;
  }
  #top-menu a:hover {
    color: #EDEDEF;
  }
  #main-menu {
    background-color: #1C1C1E;
    border-color: #2E2E32;
  }
  #main-menu ul li a {
    color: #8A8F98;
    background-color: transparent;
  }
  #main-menu ul li a:hover {
    color: #EDEDEF;
    background-color: #242428;
  }
  #main-menu ul li a.selected {
    color: #EDEDEF;
    background-color: #242428;
    border-color: #5E6AD2;
  }
  #sidebar {
    background-color: #151517;
    border-color: #2E2E32;
    color: #8A8F98;
  }
  #sidebar a {
    color: #8A8F98;
  }
  #sidebar a:hover {
    color: #EDEDEF;
  }
  #sidebar h3,
  #sidebar h4 {
    color: #5A5E66;
  }
  #footer {
    background-color: #151517;
    border-color: #2E2E32;
    color: #5A5E66;
  }
  #footer a {
    color: #5A5E66;
  }
  #footer a:hover {
    color: #8A8F98;
  }
  #project-menu {
    background-color: #1C1C1E;
    border-color: #2E2E32;
  }
  #project-menu a {
    color: #8A8F98;
  }
  #project-menu a:hover {
    color: #EDEDEF;
  }
  #project-menu a.selected {
    color: #5E6AD2;
    border-color: #5E6AD2;
  }
  #content h2,
  #content h3,
  #content h4 {
    color: #EDEDEF;
  }
  #content a {
    color: #7B85E0;
  }
  #content a:hover {
    color: #9BA3F0;
  }
  .breadcrumb,
  p.breadcrumb {
    color: #5A5E66;
  }
  .breadcrumb a {
    color: #8A8F98;
  }
  .breadcrumb a:hover {
    color: #EDEDEF;
  }
  #quick-search input[type="text"] {
    background-color: #242428;
    color: #EDEDEF;
    border-color: #2E2E32;
  }
  #quick-search input[type="text"]:focus {
    border-color: #5E6AD2;
    background-color: #1C1C1E;
  }
  hr {
    border-color: #2E2E32;
  }
  dt {
    color: #8A8F98;
  }
  dd {
    color: #EDEDEF;
  }
  /* Diffs */
  .diff_out {
    background-color: #2e1a1a;
    color: #f08080;
  }
  .diff_in {
    background-color: #1a2e1a;
    color: #6fdc6f;
  }
  table.filecontent {
    background-color: #1a1a1e;
    border-color: #2E2E32;
  }
  table.filecontent th {
    background-color: #242428;
    color: #5A5E66;
    border-color: #2E2E32;
  }
  table.filecontent td {
    color: #d4d4d8;
    border-color: #2E2E32;
  }
  /* Progress bars */
  table.progress {
    background-color: #242428;
  }
  table.progress td.closed {
    background-color: #5E6AD2;
  }
  table.progress td.done {
    background-color: #4CAF50;
  }
  table.progress td.open {
    background-color: #3a3a4a;
  }
  .progress .percent {
    color: #8A8F98;
  }
  /* Thumbnails */
  a.thumbnail {
    border-color: #2E2E32;
    background-color: #242428;
  }
  a.thumbnail:hover {
    border-color: #5E6AD2;
  }
  /* Attachments */
  div.attachments {
    border-color: #2E2E32;
  }
  div.attachments a {
    color: #7B85E0;
  }
  div.attachments span.author {
    color: #5A5E66;
  }
  div.attachments span.size {
    color: #5A5E66;
  }
  /* News */
  .news h3 a {
    color: #EDEDEF;
  }
  .news .author {
    color: #5A5E66;
  }
  .news .wiki {
    color: #EDEDEF;
  }
  /* Activity */
  #activity dt {
    color: #8A8F98;
    border-color: #2E2E32;
  }
  #activity dd {
    color: #EDEDEF;
  }
  #activity dd span.description {
    color: #8A8F98;
  }
  #activity dd .author {
    color: #5A5E66;
  }
  /* Contextual links */
  .contextual a {
    color: #8A8F98;
  }
  .contextual a:hover {
    color: #EDEDEF;
  }
}

body.theme-ws-dark {
  background-color: #1C1C1E;
  color: #EDEDEF;
}
body.theme-ws-dark #wrapper {
  background-color: #1C1C1E;
}
body.theme-ws-dark #header {
  background-color: #151517;
  border-color: #2E2E32;
  color: #EDEDEF;
}
body.theme-ws-dark #header a {
  color: #EDEDEF;
}
body.theme-ws-dark #top-menu {
  background-color: #151517;
  border-color: #2E2E32;
  color: #8A8F98;
}
body.theme-ws-dark #top-menu a {
  color: #8A8F98;
}
body.theme-ws-dark #top-menu a:hover {
  color: #EDEDEF;
}
body.theme-ws-dark #main-menu {
  background-color: #1C1C1E;
  border-color: #2E2E32;
}
body.theme-ws-dark #main-menu ul li a {
  color: #8A8F98;
  background-color: transparent;
}
body.theme-ws-dark #main-menu ul li a:hover {
  color: #EDEDEF;
  background-color: #242428;
}
body.theme-ws-dark #main-menu ul li a.selected {
  color: #EDEDEF;
  background-color: #242428;
  border-color: #5E6AD2;
}
body.theme-ws-dark #sidebar {
  background-color: #151517;
  border-color: #2E2E32;
  color: #8A8F98;
}
body.theme-ws-dark #sidebar a {
  color: #8A8F98;
}
body.theme-ws-dark #sidebar a:hover {
  color: #EDEDEF;
}
body.theme-ws-dark #sidebar h3,
body.theme-ws-dark #sidebar h4 {
  color: #5A5E66;
}
body.theme-ws-dark #footer {
  background-color: #151517;
  border-color: #2E2E32;
  color: #5A5E66;
}
body.theme-ws-dark #footer a {
  color: #5A5E66;
}
body.theme-ws-dark #footer a:hover {
  color: #8A8F98;
}
body.theme-ws-dark #project-menu {
  background-color: #1C1C1E;
  border-color: #2E2E32;
}
body.theme-ws-dark #project-menu a {
  color: #8A8F98;
}
body.theme-ws-dark #project-menu a:hover {
  color: #EDEDEF;
}
body.theme-ws-dark #project-menu a.selected {
  color: #5E6AD2;
  border-color: #5E6AD2;
}
body.theme-ws-dark #content h2,
body.theme-ws-dark #content h3,
body.theme-ws-dark #content h4 {
  color: #EDEDEF;
}
body.theme-ws-dark #content a {
  color: #7B85E0;
}
body.theme-ws-dark #content a:hover {
  color: #9BA3F0;
}
body.theme-ws-dark .breadcrumb,
body.theme-ws-dark p.breadcrumb {
  color: #5A5E66;
}
body.theme-ws-dark .breadcrumb a {
  color: #8A8F98;
}
body.theme-ws-dark .breadcrumb a:hover {
  color: #EDEDEF;
}
body.theme-ws-dark #quick-search input[type="text"] {
  background-color: #242428;
  color: #EDEDEF;
  border-color: #2E2E32;
}
body.theme-ws-dark #quick-search input[type="text"]:focus {
  border-color: #5E6AD2;
  background-color: #1C1C1E;
}
body.theme-ws-dark hr {
  border-color: #2E2E32;
}
body.theme-ws-dark dt {
  color: #8A8F98;
}
body.theme-ws-dark dd {
  color: #EDEDEF;
}
body.theme-ws-dark .diff_out {
  background-color: #2e1a1a;
  color: #f08080;
}
body.theme-ws-dark .diff_in {
  background-color: #1a2e1a;
  color: #6fdc6f;
}
body.theme-ws-dark table.filecontent {
  background-color: #1a1a1e;
  border-color: #2E2E32;
}
body.theme-ws-dark table.filecontent th {
  background-color: #242428;
  color: #5A5E66;
  border-color: #2E2E32;
}
body.theme-ws-dark table.filecontent td {
  color: #d4d4d8;
  border-color: #2E2E32;
}
body.theme-ws-dark table.progress {
  background-color: #242428;
}
body.theme-ws-dark table.progress td.closed {
  background-color: #5E6AD2;
}
body.theme-ws-dark table.progress td.done {
  background-color: #4CAF50;
}
body.theme-ws-dark table.progress td.open {
  background-color: #3a3a4a;
}
body.theme-ws-dark .progress .percent {
  color: #8A8F98;
}
body.theme-ws-dark a.thumbnail {
  border-color: #2E2E32;
  background-color: #242428;
}
body.theme-ws-dark a.thumbnail:hover {
  border-color: #5E6AD2;
}
body.theme-ws-dark div.attachments {
  border-color: #2E2E32;
}
body.theme-ws-dark div.attachments a {
  color: #7B85E0;
}
body.theme-ws-dark div.attachments span.author {
  color: #5A5E66;
}
body.theme-ws-dark div.attachments span.size {
  color: #5A5E66;
}
body.theme-ws-dark .news h3 a {
  color: #EDEDEF;
}
body.theme-ws-dark .news .author {
  color: #5A5E66;
}
body.theme-ws-dark .news .wiki {
  color: #EDEDEF;
}
body.theme-ws-dark #activity dt {
  color: #8A8F98;
  border-color: #2E2E32;
}
body.theme-ws-dark #activity dd {
  color: #EDEDEF;
}
body.theme-ws-dark #activity dd span.description {
  color: #8A8F98;
}
body.theme-ws-dark #activity dd .author {
  color: #5A5E66;
}
body.theme-ws-dark .contextual a {
  color: #8A8F98;
}
body.theme-ws-dark .contextual a:hover {
  color: #EDEDEF;
}

/* ==========================================================================
   SECTION 4: CONTEXT MENUS
   ========================================================================== */

#context-menu {
  background-color: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: var(--space-1) 0;
  min-width: 180px;
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  z-index: 1000;
}

#context-menu ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#context-menu li {
  list-style: none;
  margin: 0;
  padding: 0;
}

#context-menu a {
  display: block;
  padding: var(--space-2) var(--space-3);
  color: var(--text-primary);
  font-size: var(--font-size-base);
  border-radius: var(--radius-sm);
  text-decoration: none;
  margin: 0 var(--space-1);
  transition: background-color 0.15s ease, color 0.15s ease;
}

#context-menu a:hover {
  background-color: var(--bg-accent);
  color: var(--text-on-accent);
}

#context-menu .icon {
  padding-left: 24px;
  background-repeat: no-repeat;
  background-position: 4px center;
  background-size: 14px 14px;
}

#context-menu li.folder > a {
  font-weight: var(--font-weight-medium);
}

#context-menu li.folder > a::after {
  content: "";
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 4px solid currentColor;
  border-top: 4px solid transparent;
  border-bottom: 4px solid transparent;
  margin-left: var(--space-2);
  vertical-align: middle;
}

#context-menu ul ul {
  position: absolute;
  left: 100%;
  top: 0;
  background-color: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: var(--space-1) 0;
  min-width: 160px;
}

#context-menu li.separator {
  border-top: 1px solid var(--border-primary);
  margin: var(--space-1) 0;
}

#context-menu a.disabled,
#context-menu li.disabled a {
  color: var(--text-tertiary);
  cursor: not-allowed;
  pointer-events: none;
}

/* ==========================================================================
   SECTION 5: MODAL / DIALOG
   ========================================================================== */

.ui-widget-overlay {
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
}

div.ui-dialog {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
  font-family: var(--font-family);
  padding: 0;
}

div.ui-dialog .ui-dialog-titlebar {
  background: var(--bg-primary);
  background-image: none;
  padding: var(--space-4) var(--space-5);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  border-bottom: 1px solid var(--border-primary);
  border-radius: var(--radius-xl) var(--radius-xl) 0 0;
}

div.ui-dialog .ui-dialog-titlebar-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: var(--space-1);
  border-radius: var(--radius-sm);
  transition: background-color 0.15s ease, color 0.15s ease;
}

div.ui-dialog .ui-dialog-titlebar-close:hover {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
}

div.ui-dialog .ui-dialog-content {
  padding: var(--space-5);
  font-size: var(--font-size-base);
  color: var(--text-primary);
  background: var(--bg-primary);
}

div.ui-dialog .ui-dialog-buttonpane {
  padding: var(--space-3) var(--space-5);
  border-top: 1px solid var(--border-primary);
  background: var(--bg-secondary);
  border-radius: 0 0 var(--radius-xl) var(--radius-xl);
}

div.ui-dialog .ui-dialog-buttonpane button {
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-primary);
  background: var(--bg-tertiary);
  color: var(--text-primary);
  cursor: pointer;
  transition: background-color 0.15s ease, border-color 0.15s ease;
}

div.ui-dialog .ui-dialog-buttonpane button:hover {
  background: var(--bg-accent);
  border-color: var(--bg-accent);
  color: var(--text-on-accent);
}

/* jQuery UI widget overrides */
.ui-widget {
  font-family: var(--font-family);
  font-size: var(--font-size-base);
}

.ui-widget-content {
  border-color: var(--border-primary);
  background: var(--bg-primary);
  color: var(--text-primary);
}

.ui-widget-header {
  border-color: var(--border-primary);
  background: var(--bg-secondary);
  color: var(--text-primary);
  background-image: none;
}

.ui-state-default {
  border-color: var(--border-primary);
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.ui-state-hover {
  border-color: var(--bg-accent);
  background: var(--bg-accent);
  color: var(--text-on-accent);
}

.ui-state-active {
  border-color: var(--bg-accent);
  background: var(--bg-accent);
  color: var(--text-on-accent);
}

/* ==========================================================================
   SECTION 6: DROPDOWN MENUS (.drdn)
   ========================================================================== */

.drdn .drdn-trigger {
  cursor: pointer;
  user-select: none;
}

.drdn .drdn-trigger::after {
  content: "";
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid currentColor;
  margin-left: var(--space-1);
  vertical-align: middle;
}

.drdn .drdn-content {
  display: none;
  position: absolute;
  background-color: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: var(--space-1) 0;
  min-width: 200px;
  z-index: 999;
  font-family: var(--font-family);
  font-size: var(--font-size-base);
}

.drdn .drdn-content.visible {
  display: block;
}

.drdn .drdn-content a {
  display: block;
  padding: var(--space-2) var(--space-3);
  color: var(--text-primary);
  font-size: var(--font-size-base);
  border-radius: var(--radius-sm);
  text-decoration: none;
  margin: 0 var(--space-1);
  transition: background-color 0.15s ease, color 0.15s ease;
}

.drdn .drdn-content a:hover {
  background-color: var(--bg-accent);
  color: var(--text-on-accent);
}

.drdn .drdn-content .group-label {
  padding: var(--space-2) var(--space-3);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.drdn .drdn-content .separator {
  border-top: 1px solid var(--border-primary);
  margin: var(--space-1) 0;
}

.drdn .drdn-content a.selected {
  background-color: var(--bg-accent-subtle);
  color: var(--bg-accent);
  font-weight: var(--font-weight-medium);
}

/* ==========================================================================
   SECTION 7: AUTOCOMPLETE
   ========================================================================== */

.ui-autocomplete,
.autocomplete,
ul.ui-autocomplete {
  background-color: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: var(--space-1);
  max-height: 300px;
  overflow-y: auto;
  z-index: 1001;
  font-family: var(--font-family);
  list-style: none;
}

.ui-autocomplete li,
.autocomplete li,
ul.ui-autocomplete li {
  padding: var(--space-2) var(--space-3);
  font-size: var(--font-size-base);
  color: var(--text-primary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background-color 0.12s ease;
  list-style: none;
}

.ui-autocomplete li:hover,
.autocomplete li:hover,
.ui-autocomplete li.selected,
.autocomplete li.selected {
  background-color: var(--bg-accent);
  color: var(--text-on-accent);
}

.ui-autocomplete .ui-menu-item-wrapper {
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-sm);
}

.ui-autocomplete .ui-state-active,
.ui-autocomplete .ui-state-focus {
  background-color: var(--bg-accent);
  color: var(--text-on-accent);
  border-color: transparent;
  margin: 0;
}

/* jQuery UI menu overrides for autocomplete */
.ui-menu {
  list-style: none;
  padding: var(--space-1);
}

.ui-menu .ui-menu-item {
  list-style: none;
  margin: 0;
}

/* ==========================================================================
   SECTION 8: RESPONSIVE — SAFE ADJUSTMENTS ONLY
   No layout changes to structural elements
   ========================================================================== */

@media (max-width: 900px) {
  /* Allow horizontal scrolling for wide tables */
  .autoscroll {
    overflow-x: auto;
  }

  /* Reduce table cell padding */
  table.list td,
  table.issues td {
    padding: var(--space-1) var(--space-2);
  }

  table.list th,
  table.issues th {
    padding: var(--space-1) var(--space-2);
  }

  /* Reduce form label font size */
  .tabular label {
    font-size: var(--font-size-sm);
  }

  /* Hide checkbox column to save space */
  table.issues td.checkbox {
    display: none;
  }
  table.issues th.checkbox {
    display: none;
  }
}

@media (max-width: 600px) {
  /* Hide less important table columns on very small screens */
  table.issues td.created_on,
  table.issues th.created_on,
  table.list td.created_on,
  table.list th.created_on {
    display: none;
  }
  table.issues td.updated_on,
  table.issues th.updated_on,
  table.list td.updated_on,
  table.list th.updated_on {
    display: none;
  }
  table.issues td.due_date,
  table.issues th.due_date,
  table.list td.due_date,
  table.list th.due_date {
    display: none;
  }
  table.issues td.estimated_hours,
  table.issues th.estimated_hours,
  table.list td.estimated_hours,
  table.list th.estimated_hours {
    display: none;
  }
  table.issues td.done_ratio,
  table.issues th.done_ratio,
  table.list td.done_ratio,
  table.list th.done_ratio {
    display: none;
  }
  table.issues td.category,
  table.issues th.category,
  table.list td.category,
  table.list th.category {
    display: none;
  }
  table.issues td.fixed_version,
  table.issues th.fixed_version,
  table.list td.fixed_version,
  table.list th.fixed_version {
    display: none;
  }

  /* Reduce table font size */
  table.list td,
  table.issues td {
    font-size: var(--font-size-sm);
  }
  table.list th,
  table.issues th {
    font-size: var(--font-size-sm);
  }

  /* Form label adjustments — display change is safe on form labels */
  .tabular label {
    display: block;
    text-align: left;
    font-size: var(--font-size-sm);
  }

  /* Pagination font size */
  p.pagination {
    font-size: var(--font-size-sm);
  }

  /* Footer font size */
  #footer {
    font-size: var(--font-size-xs);
  }

  /* Wiki font size */
  div.wiki {
    font-size: var(--font-size-sm);
  }
}

/* ==========================================================================
   SECTION 9: PRINT STYLES
   ========================================================================== */

@media print {
  /* Hide non-essential elements */
  #header,
  #top-menu,
  #main-menu,
  #project-menu,
  #sidebar,
  #footer,
  .contextual,
  .other-formats,
  p.pagination,
  .pagination,
  #flash_notice,
  #flash_error,
  #flash_warning,
  #context-menu,
  .drdn,
  .drdn-content,
  div.ui-dialog,
  .ui-widget-overlay,
  .theme-mode-toggle,
  #account-nav {
    display: none;
  }

  /* Clean base for print */
  body {
    background: white;
    color: black;
    font-size: 12pt;
    line-height: 1.5;
  }

  #wrapper,
  #main,
  #content {
    background: white;
    color: black;
  }

  /* Remove shadows and border-radius */
  * {
    box-shadow: none;
    text-shadow: none;
  }

  .mypage-box,
  div.ui-dialog,
  #context-menu,
  .drdn .drdn-content {
    border-radius: 0;
  }

  /* Table borders for print readability */
  table,
  table th,
  table td {
    border: 1px solid #ccc;
  }

  table th {
    background-color: #f5f5f5;
  }

  /* Show link URLs in print */
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 10pt;
    color: #666;
  }

  /* Don't show URL for internal/anchor links */
  a[href^="#"]::after,
  a[href^="javascript:"]::after {
    content: "";
  }

  /* Prevent page breaks inside important elements */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }

  table, img, pre, blockquote {
    page-break-inside: avoid;
  }

  /* Code blocks for print */
  pre,
  code {
    background-color: #f8f8f8;
    border: 1px solid #ddd;
    color: #333;
  }
}

/* ==========================================================================
   SECTION 10: ANIMATIONS
   ========================================================================== */

/* Body transition for dark mode switching */
body {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Theme transition helper class (added by JS during mode switch) */
.theme-transition,
.theme-transition *,
.theme-transition *::before,
.theme-transition *::after {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Flash message slide-in */
@keyframes wsFlashSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

#flash_notice,
#flash_error,
#flash_warning {
  animation: wsFlashSlideIn 0.3s ease-out;
}

/* Modal fade-in */
@keyframes wsModalFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

div.ui-dialog {
  animation: wsModalFadeIn 0.2s ease-out;
}

/* Context menu entrance */
@keyframes wsContextMenuIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

#context-menu {
  animation: wsContextMenuIn 0.15s ease-out;
}

/* Dropdown entrance */
@keyframes wsDropdownIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.drdn .drdn-content.visible {
  animation: wsDropdownIn 0.15s ease-out;
}

/* My page box hover */
.mypage-box {
  transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.mypage-box:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

/* Button press effect */
input[type="submit"]:active,
input[type="button"]:active,
button:active,
a.button:active {
  transform: scale(0.98);
}

/* Reduced motion — respect user preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms;
    animation-iteration-count: 1;
    transition-duration: 0.01ms;
    scroll-behavior: auto;
  }

  .mypage-box:hover {
    transform: none;
  }

  input[type="submit"]:active,
  input[type="button"]:active,
  button:active,
  a.button:active {
    transform: none;
  }
}

/* ==========================================================================
   SECTION 11: ACCESSIBILITY
   ========================================================================== */

/* Focus visible — keyboard-only focus ring */
:focus-visible {
  outline: 2px solid var(--bg-accent);
  outline-offset: 2px;
}

/* Remove outline for mouse clicks */
:focus:not(:focus-visible) {
  outline: none;
}

/* Screen reader only — hidden visually but accessible */
.sr-only,
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* High contrast mode (forced-colors) */
@media (forced-colors: active) {
  a {
    text-decoration: underline;
  }

  input[type="submit"],
  input[type="button"],
  button,
  a.button {
    border: 2px solid ButtonText;
  }

  :focus-visible {
    outline: 2px solid Highlight;
    outline-offset: 2px;
  }

  table th,
  table td {
    border: 1px solid CanvasText;
  }

  #context-menu,
  .drdn .drdn-content,
  div.ui-dialog {
    border: 2px solid CanvasText;
  }
}

/* Current page indicator */
[aria-current="page"] {
  font-weight: var(--font-weight-semibold);
  color: var(--bg-accent);
}

/* ==========================================================================
   SECTION 12: SCROLLBAR STYLING
   ========================================================================== */

/* Webkit scrollbars (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--text-tertiary);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}

::-webkit-scrollbar-corner {
  background: var(--bg-secondary);
}

/* Firefox scrollbars */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--text-tertiary) var(--bg-secondary);
}

/* Dark mode scrollbar overrides — Webkit */
@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-track {
    background: #151517;
  }
  ::-webkit-scrollbar-thumb {
    background: #3a3a3e;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #5A5E66;
  }
  ::-webkit-scrollbar-corner {
    background: #151517;
  }
  /* Firefox dark scrollbar */
  * {
    scrollbar-color: #3a3a3e #151517;
  }
}

body.theme-ws-dark ::-webkit-scrollbar-track {
  background: #151517;
}
body.theme-ws-dark ::-webkit-scrollbar-thumb {
  background: #3a3a3e;
}
body.theme-ws-dark ::-webkit-scrollbar-thumb:hover {
  background: #5A5E66;
}
body.theme-ws-dark ::-webkit-scrollbar-corner {
  background: #151517;
}
body.theme-ws-dark * {
  scrollbar-color: #3a3a3e #151517;
}
