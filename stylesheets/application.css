/**
 * WS Redmine Theme — Linear.app-inspired overrides
 * https://github.com/wsagency/ws-redmine-theme
 *
 * This theme OVERRIDES Redmine's default CSS. It does NOT replace it.
 * Only visual properties (colors, fonts, shadows, radii) are changed.
 * Layout, structure, positioning, and sizing are left untouched.
 */

/* Import Redmine's default stylesheet */
@import url(/application.css);

/* Import Inter font */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* ============================================================
   CSS Variables — Light Mode (default)
   ============================================================ */
:root {
  --ws-accent: #5E6AD2;
  --ws-accent-hover: #4E5BBD;
  --ws-accent-light: rgba(94, 106, 210, 0.08);
  --ws-bg: #FFFFFF;
  --ws-bg-secondary: #F9F9FB;
  --ws-bg-tertiary: #F3F3F6;
  --ws-text: #1B1B1F;
  --ws-text-secondary: #6B6F76;
  --ws-text-tertiary: #9CA0A8;
  --ws-border: #E8E8EC;
  --ws-border-light: #F0F0F3;
  --ws-radius: 6px;
  --ws-font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --ws-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

/* ============================================================
   Typography
   ============================================================ */
body {
  font-family: var(--ws-font);
  font-size: 13px;
  letter-spacing: -0.01em;
  color: var(--ws-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 { font-family: var(--ws-font); }
h1 { font-weight: 600; }
h2 { font-weight: 600; }
h3 { font-weight: 600; }
h4 { font-weight: 500; }
#content h1, h2, h3, h4, h5, h6 { color: var(--ws-text); }

/* ============================================================
   Header & Navigation
   ============================================================ */
#top-menu {
  background: #1E1E20;
  color: rgba(255, 255, 255, 0.85);
}
#top-menu a { color: rgba(255, 255, 255, 0.85); }
#top-menu a:hover { color: #fff; text-decoration: none; }
#top-menu #loggedas { color: rgba(255, 255, 255, 0.6); }

#header {
  background: linear-gradient(135deg, var(--ws-accent), #4E5BBD);
  color: #fff;
}
#header a { color: #fff; }
#header h1 { font-weight: 600; }

#main-menu li a {
  color: rgba(255, 255, 255, 0.8);
  border-radius: 6px 6px 0 0;
}
#main-menu li a:hover {
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
}
#main-menu li a.selected,
#main-menu li a.selected:hover {
  background: var(--ws-bg);
  color: var(--ws-text);
}

/* Menu children dropdown */
#main-menu .menu-children {
  background-color: var(--ws-bg);
  border-color: var(--ws-border);
  border-radius: 0 0 var(--ws-radius) var(--ws-radius);
  box-shadow: var(--ws-shadow);
}
#main-menu .menu-children li a { color: var(--ws-text); background-color: var(--ws-bg); }
#main-menu .menu-children li a:hover { color: #fff; background-color: var(--ws-accent); }

/* ============================================================
   Links
   ============================================================ */
a, a:link, a:visited { color: var(--ws-accent); }
a:hover, a:active { color: var(--ws-accent-hover); text-decoration: underline; }
a.issue.closed, a.issue.closed:link, a.issue.closed:visited { color: var(--ws-text-tertiary); }

/* Sidebar selected link */
#sidebar a.selected { background-color: var(--ws-accent); color: #fff; border-radius: 4px; }
#sidebar a.selected:hover { text-decoration: none; }

/* ============================================================
   Content & Sidebar
   ============================================================ */
#content { background-color: var(--ws-bg); }
#sidebar { background: var(--ws-bg-secondary); border-left-color: var(--ws-border); }
#sidebar h3 { color: var(--ws-text-secondary); }
#footer { border-top-color: var(--ws-border); color: var(--ws-text-tertiary); background: var(--ws-bg); }

/* ============================================================
   Tables
   ============================================================ */
table.list, .table-list {
  border-color: var(--ws-border);
}
table.list th, .table-list-header {
  background-color: var(--ws-bg-secondary);
  border-bottom-color: var(--ws-border);
  color: var(--ws-text-secondary);
  font-weight: 600;
}
table.list td { border-top-color: var(--ws-border-light); }

/* Alternating rows */
table.list:not(.odd-even) tbody tr:nth-child(odd), .odd { background-color: var(--ws-bg); }
table.list:not(.odd-even) tbody tr:nth-child(even), .even { background-color: var(--ws-bg-secondary); }
table.list:not(.odd-even) tbody tr:nth-child(odd):hover,
table.list:not(.odd-even) tbody tr:nth-child(even):hover,
.odd:hover, .even:hover { background-color: var(--ws-accent-light); }

tr.group td { border-bottom-color: var(--ws-border); background-color: var(--ws-bg); }
tr.group span.totals { color: var(--ws-text-tertiary); }

/* ============================================================
   Forms & Inputs
   ============================================================ */
input, select, textarea, button {
  color: var(--ws-text);
  background-color: var(--ws-bg);
  border-color: var(--ws-border);
  border-radius: var(--ws-radius);
}
input[type="text"]:focus, input[type="password"]:focus,
input[type="date"]:focus, input[type="number"]:focus,
select:focus, textarea:focus {
  border-color: var(--ws-accent);
  box-shadow: 0 0 0 2px var(--ws-accent-light);
  outline: none;
}

/* Buttons */
input[type="submit"], button[type="submit"] {
  background-color: var(--ws-accent);
  color: #fff;
  border-color: var(--ws-accent);
  border-radius: var(--ws-radius);
  font-weight: 500;
}
input[type="submit"]:hover, button[type="submit"]:hover {
  background-color: var(--ws-accent-hover);
  border-color: var(--ws-accent-hover);
}

/* Fieldsets */
fieldset { border-color: var(--ws-border); border-radius: var(--ws-radius); }
legend { color: var(--ws-text); }

/* Tabular labels */
.tabular label { color: var(--ws-text-secondary); }

/* ============================================================
   Boxes, Flash Messages & Alerts
   ============================================================ */
.box {
  background-color: var(--ws-bg-secondary);
  border-color: var(--ws-border);
  color: var(--ws-text);
  border-radius: var(--ws-radius);
  box-shadow: var(--ws-shadow);
}

div.flash, #errorExplanation, .nodata, .warning, .conflict {
  border-radius: var(--ws-radius);
}

/* ============================================================
   Issue Detail
   ============================================================ */
div.issue {
  background: var(--ws-bg-secondary);
  border-color: var(--ws-border);
  border-radius: var(--ws-radius);
  box-shadow: var(--ws-shadow);
}
div.issue .attributes .attribute .label { color: var(--ws-text-secondary); }

/* Sticky issue header */
div#sticky-issue-header {
  background-color: var(--ws-bg);
  border-bottom-color: var(--ws-border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* ============================================================
   Dropdowns
   ============================================================ */
.drdn-content {
  background-color: var(--ws-bg);
  border-color: var(--ws-border);
  border-radius: var(--ws-radius);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}
.drdn-items > a:hover { background-color: var(--ws-accent-light); }
.contextual .drdn-items > a:hover, .journal-actions .drdn-items > a:hover {
  color: var(--ws-accent);
  border-color: var(--ws-accent);
  background-color: var(--ws-accent-light);
  border-radius: 4px;
}

#project-jump .drdn-trigger {
  border-color: var(--ws-border);
  color: var(--ws-text);
  border-radius: var(--ws-radius);
}
#project-jump .drdn-content { border-radius: var(--ws-radius); }
#project-jump .drdn-items > a:hover { background-color: var(--ws-accent); color: #fff; }

/* ============================================================
   Login
   ============================================================ */
#login-form {
  border-color: var(--ws-border);
  background-color: var(--ws-bg);
  border-radius: var(--ws-radius);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
}

/* ============================================================
   Pagination
   ============================================================ */
.pagination ul.pages li { border-color: var(--ws-border); }
.pagination ul.pages li a:hover { background-color: var(--ws-accent-light); color: var(--ws-accent); }
.pagination ul.pages li.current { background-color: var(--ws-accent); }
.pagination ul.pages li.current span { color: #fff; }
.pagination ul.pages li:first-child { border-radius: var(--ws-radius) 0 0 var(--ws-radius); }
.pagination ul.pages li:last-child { border-radius: 0 var(--ws-radius) var(--ws-radius) 0; }

/* ============================================================
   Project Cards
   ============================================================ */
#projects-index ul.projects li.root {
  border-color: var(--ws-border);
  border-radius: var(--ws-radius);
  box-shadow: var(--ws-shadow);
}
#projects-index ul.projects li.root:hover { box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06); }
#projects-index li.root ul.projects { border-left-color: var(--ws-border); }

/* ============================================================
   Activity
   ============================================================ */
div#activity h3 { background-color: var(--ws-bg-secondary); border-radius: var(--ws-radius); }
div#activity dt { border-top-color: var(--ws-border-light); }

/* ============================================================
   Misc
   ============================================================ */
.highlight { background-color: #FFF3BF; }
a.user.user-mention { background-color: var(--ws-accent-light); border-radius: 4px; }
hr { background: var(--ws-border); }
blockquote { border-left-color: var(--ws-border); }

/* Wiki */
.wiki h4 { border-bottom-color: var(--ws-border); }

/* Modal */
div.modal { border-radius: var(--ws-radius); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12); }

/* Transition class for dark mode toggle animation */
.theme-transition,
.theme-transition *,
.theme-transition *::before,
.theme-transition *::after {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* ============================================================
   Dark Mode — body.theme-ws-dark class
   ============================================================ */
body.theme-ws-dark {
  --ws-accent: #6E7AE2;
  --ws-accent-hover: #8088E8;
  --ws-accent-light: rgba(110, 122, 226, 0.12);
  --ws-bg: #1C1C1E;
  --ws-bg-secondary: #242428;
  --ws-bg-tertiary: #2C2C30;
  --ws-text: #EDEDEF;
  --ws-text-secondary: #8A8F98;
  --ws-text-tertiary: #5A5E66;
  --ws-border: #2E2E32;
  --ws-border-light: #232326;
  --ws-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

body.theme-ws-dark #wrapper { background: var(--ws-bg); }
body.theme-ws-dark #top-menu { background: #111113; }
body.theme-ws-dark #header { background: linear-gradient(135deg, #3D4599, #2E357A); }

body.theme-ws-dark #main-menu li a.selected,
body.theme-ws-dark #main-menu li a.selected:hover {
  background: var(--ws-bg);
  color: var(--ws-text);
}

body.theme-ws-dark #main-menu .menu-children { background-color: var(--ws-bg-secondary); border-color: var(--ws-border); }
body.theme-ws-dark #main-menu .menu-children li a { color: var(--ws-text); background-color: var(--ws-bg-secondary); }
body.theme-ws-dark #main-menu .menu-children li a:hover { background-color: var(--ws-accent); color: #fff; }

body.theme-ws-dark a, body.theme-ws-dark a:link, body.theme-ws-dark a:visited { color: var(--ws-accent); }
body.theme-ws-dark a:hover, body.theme-ws-dark a:active { color: var(--ws-accent-hover); }

body.theme-ws-dark input,
body.theme-ws-dark select,
body.theme-ws-dark textarea,
body.theme-ws-dark button {
  color: var(--ws-text);
  background-color: var(--ws-bg-tertiary);
  border-color: var(--ws-border);
}

body.theme-ws-dark input[type="submit"],
body.theme-ws-dark button[type="submit"] {
  background-color: var(--ws-accent);
  border-color: var(--ws-accent);
  color: #fff;
}
body.theme-ws-dark input[type="submit"]:hover,
body.theme-ws-dark button[type="submit"]:hover {
  background-color: var(--ws-accent-hover);
  border-color: var(--ws-accent-hover);
}

body.theme-ws-dark select { background-color: var(--ws-bg-tertiary); }

body.theme-ws-dark .drdn-content { background-color: var(--ws-bg-secondary); border-color: var(--ws-border); }
body.theme-ws-dark #project-jump .drdn-trigger { color: var(--ws-text); background-color: var(--ws-bg-tertiary); border-color: var(--ws-border); }
body.theme-ws-dark #project-jump .drdn-items > * { color: var(--ws-text); }
body.theme-ws-dark #project-jump .drdn-items > a:hover { background-color: var(--ws-accent); color: #fff; }

body.theme-ws-dark div.flash.error, body.theme-ws-dark #errorExplanation { background-color: #3D1F1F; border-color: #6B3030; color: #FCA5A5; }
body.theme-ws-dark div.flash.notice { background-color: #1A3A1A; border-color: #2D5A2D; color: #86EFAC; }
body.theme-ws-dark div.flash.warning, body.theme-ws-dark .conflict { background-color: #3D2E0F; border-color: #5C4A1A; color: #FCD34D; }

body.theme-ws-dark #login-form { background-color: var(--ws-bg-secondary); border-color: var(--ws-border); }
body.theme-ws-dark div#sticky-issue-header { background-color: var(--ws-bg-secondary); border-bottom-color: var(--ws-border); }
body.theme-ws-dark .pagination ul.pages li { border-color: var(--ws-border); }
body.theme-ws-dark .pagination ul.pages li a { color: var(--ws-text-secondary); }
body.theme-ws-dark #sidebar-switch-button:hover { background-color: var(--ws-bg-tertiary); }
body.theme-ws-dark #sidebar-switch-button svg { stroke: var(--ws-text-secondary); }

body.theme-ws-dark input:disabled,
body.theme-ws-dark select:disabled,
body.theme-ws-dark textarea:disabled {
  background-color: var(--ws-bg);
  color: var(--ws-text-tertiary);
}

/* ============================================================
   @media prefers-color-scheme: dark (auto mode)
   Mirrors body.theme-ws-dark but uses body:not(.theme-ws-light)
   so it activates unless user explicitly chose light mode.
   ============================================================ */
@media (prefers-color-scheme: dark) {
  body:not(.theme-ws-light) {
    --ws-accent: #6E7AE2;
    --ws-accent-hover: #8088E8;
    --ws-accent-light: rgba(110, 122, 226, 0.12);
    --ws-bg: #1C1C1E;
    --ws-bg-secondary: #242428;
    --ws-bg-tertiary: #2C2C30;
    --ws-text: #EDEDEF;
    --ws-text-secondary: #8A8F98;
    --ws-text-tertiary: #5A5E66;
    --ws-border: #2E2E32;
    --ws-border-light: #232326;
    --ws-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  body:not(.theme-ws-light) #wrapper { background: var(--ws-bg); }
  body:not(.theme-ws-light) #top-menu { background: #111113; }
  body:not(.theme-ws-light) #header { background: linear-gradient(135deg, #3D4599, #2E357A); }

  body:not(.theme-ws-light) #main-menu li a.selected,
  body:not(.theme-ws-light) #main-menu li a.selected:hover {
    background: var(--ws-bg);
    color: var(--ws-text);
  }

  body:not(.theme-ws-light) #main-menu .menu-children { background-color: var(--ws-bg-secondary); border-color: var(--ws-border); }
  body:not(.theme-ws-light) #main-menu .menu-children li a { color: var(--ws-text); background-color: var(--ws-bg-secondary); }
  body:not(.theme-ws-light) #main-menu .menu-children li a:hover { background-color: var(--ws-accent); color: #fff; }

  body:not(.theme-ws-light) a, body:not(.theme-ws-light) a:link, body:not(.theme-ws-light) a:visited { color: var(--ws-accent); }
  body:not(.theme-ws-light) a:hover, body:not(.theme-ws-light) a:active { color: var(--ws-accent-hover); }

  body:not(.theme-ws-light) input,
  body:not(.theme-ws-light) select,
  body:not(.theme-ws-light) textarea,
  body:not(.theme-ws-light) button {
    color: var(--ws-text);
    background-color: var(--ws-bg-tertiary);
    border-color: var(--ws-border);
  }

  body:not(.theme-ws-light) input[type="submit"],
  body:not(.theme-ws-light) button[type="submit"] {
    background-color: var(--ws-accent);
    border-color: var(--ws-accent);
    color: #fff;
  }
  body:not(.theme-ws-light) input[type="submit"]:hover,
  body:not(.theme-ws-light) button[type="submit"]:hover {
    background-color: var(--ws-accent-hover);
    border-color: var(--ws-accent-hover);
  }

  body:not(.theme-ws-light) select { background-color: var(--ws-bg-tertiary); }

  body:not(.theme-ws-light) .drdn-content { background-color: var(--ws-bg-secondary); border-color: var(--ws-border); }
  body:not(.theme-ws-light) #project-jump .drdn-trigger { color: var(--ws-text); background-color: var(--ws-bg-tertiary); border-color: var(--ws-border); }
  body:not(.theme-ws-light) #project-jump .drdn-items > * { color: var(--ws-text); }
  body:not(.theme-ws-light) #project-jump .drdn-items > a:hover { background-color: var(--ws-accent); color: #fff; }

  body:not(.theme-ws-light) div.flash.error, body:not(.theme-ws-light) #errorExplanation { background-color: #3D1F1F; border-color: #6B3030; color: #FCA5A5; }
  body:not(.theme-ws-light) div.flash.notice { background-color: #1A3A1A; border-color: #2D5A2D; color: #86EFAC; }
  body:not(.theme-ws-light) div.flash.warning, body:not(.theme-ws-light) .conflict { background-color: #3D2E0F; border-color: #5C4A1A; color: #FCD34D; }

  body:not(.theme-ws-light) #login-form { background-color: var(--ws-bg-secondary); border-color: var(--ws-border); }
  body:not(.theme-ws-light) div#sticky-issue-header { background-color: var(--ws-bg-secondary); border-bottom-color: var(--ws-border); }
  body:not(.theme-ws-light) .pagination ul.pages li { border-color: var(--ws-border); }
  body:not(.theme-ws-light) .pagination ul.pages li a { color: var(--ws-text-secondary); }
  body:not(.theme-ws-light) #sidebar-switch-button:hover { background-color: var(--ws-bg-tertiary); }
  body:not(.theme-ws-light) #sidebar-switch-button svg { stroke: var(--ws-text-secondary); }

  body:not(.theme-ws-light) input:disabled,
  body:not(.theme-ws-light) select:disabled,
  body:not(.theme-ws-light) textarea:disabled {
    background-color: var(--ws-bg);
    color: var(--ws-text-tertiary);
  }
}
